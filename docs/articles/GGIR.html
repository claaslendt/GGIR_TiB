<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="GGIR">
<title>Accelerometer data processing with GGIR • GGIR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accelerometer data processing with GGIR">
<meta property="og:description" content="GGIR">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@RpackageGGIR">
<meta name="twitter:site" content="@RpackageGGIR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="pkgdown.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GGIR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.10-3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/chapterInProgress.html">Get Started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/chapterInProgress.html">1. The GGIR pipeline</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">2. Inspecting the Data Quality in GGIR</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">3. From Raw Data to Acceleration Metrics</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">4. Accounting for Study Protocol</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">5. How GGIR Deals with Invalid Data</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">6. Characterizing Human Behaviour with GGIR</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">7. The 24-hour time use analysis</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">8. Cleaning the Data</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">9. Inspecting the results</a>
    <a class="dropdown-item" href="../articles/chapterInProgress.html">10. Motivation and Clarification</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.accelting.com/updates/ggir-release-2-9-0/">Version 2.9-0</a>
    <a class="external-link dropdown-item" href="https://www.accelting.com/updates/ggir-release-2-8-0/">Version 2.8-0</a>
    <a class="external-link dropdown-item" href="https://www.accelting.com/updates/ggir-release-2-7-1/">Version 2.7-1</a>
    <a class="external-link dropdown-item" href="https://www.accelting.com/updates/ggir-release-2-6-0/">Version 2.6-0</a>
    <a class="external-link dropdown-item" href="https://www.accelting.com/updates/ggir-release-2-5-0/">Version 2.5-0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/wadpac/GGIR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/RpackageGGIR" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Accelerometer data processing with GGIR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/wadpac/GGIR/blob/HEAD/vignettes/GGIR.Rmd" class="external-link"><code>vignettes/GGIR.Rmd</code></a></small>
      <div class="d-none name"><code>GGIR.Rmd</code></div>
    </div>

    
    
<p><img src="../../../R%20pkgs/GGIR/articles/GGIR-MASTERLOGO-RGB.png" width="60%" style="border: 0; padding:20px"></p>
<p>You are now in the main GGIR vignette. See also the complementary
vignettes on: <a href="https://CRAN.R-project.org/package=GGIR/vignettes/CutPoints.html" class="external-link">Cut-points</a>,
<a href="https://CRAN.R-project.org/package=GGIR/vignettes/TutorialDaySegmentAnalyses.html" class="external-link">Day
segment analyses</a>, <a href="https://CRAN.R-project.org/package=GGIR/vignettes/GGIRParameters.html" class="external-link">GGIR
parameters</a>, <a href="https://CRAN.R-project.org/package=GGIR/vignettes/ExternalFunction.pdf" class="external-link">Embedding
external functions (pdf)</a>, and <a href="https://CRAN.R-project.org/package=GGIR/vignettes/readmyacccsv.html" class="external-link">Reading
ad-hoc csv file formats</a>.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="what-is-ggir">What is GGIR?<a class="anchor" aria-label="anchor" href="#what-is-ggir"></a>
</h3>
<p><a href="https://CRAN.R-project.org/package=GGIR" class="external-link">GGIR</a> is an
R-package to process multi-day raw accelerometer data for physical
activity and sleep research. The term <strong><em>raw</em></strong>
refers to data being expressed in m/s<sup>2</sup> or gravitational
acceleration as opposed to the previous generation accelerometers which
stored data in accelerometer brand specific units. The signal processing
includes automatic calibration, detection of sustained abnormally high
values, detection of non-wear and calculation of average magnitude of
dynamic acceleration based on a variety of metrics. Next, GGIR uses this
information to describe the data per recording, per day of measurement,
and (optionally) per segment of a day of measurement, including
estimates of physical activity, inactivity and sleep. We published an
overview paper of GGIR in 2019 <a href="https://doi.org/10.1123/jmpb.2018-0063" class="external-link">link</a>.</p>
<p>This vignette provides a general introduction on how to use GGIR and
interpret the output, additionally you can find a <a href="https://youtu.be/RuFBCAqFJ2M" class="external-link">introduction video</a> and a <a href="https://youtu.be/S8YPTrYNWdU" class="external-link">mini-tutorial</a> on YouTube. If you
want to use your own algorithms for raw data then GGIR facilitates this
with it’s external function embedding feature, documented in a separate
vignette: <a href="https://CRAN.R-project.org/package=GGIR" class="external-link">Embedding
external functions in GGIR</a>. GGIR is increasingly being used by
research groups across the world. A non-exhaustive overview of academic
publications related to GGIR can be found <a href="https://github.com/wadpac/GGIR/wiki/Publication-list" class="external-link">here</a>. R
package GGIR would not have been possible without the support of the
contributors listed in the author list at <a href="https://CRAN.R-project.org/package=GGIR" class="external-link">GGIR</a>, with specific
code contributions over time since April 2016 (when GGIR development
moved to GitHub) shown <a href="https://github.com/wadpac/GGIR/graphs/contributors" class="external-link">here</a>.</p>
<p><strong>Cite GGIR:</strong></p>
<p>When you use GGIR in publications do not forget to cite it properly
as that makes your research more reproducible and it gives credit to
it’s developers. See paragraph on <a href="#CitingGGIR">Citing GGIR</a>
for details.</p>
</div>
<div class="section level3">
<h3 id="contributing-support-and-keeping-up-to-date">Contributing, Support, and Keeping up to date<a class="anchor" aria-label="anchor" href="#contributing-support-and-keeping-up-to-date"></a>
</h3>
<p><strong>How to contribute to the code?</strong></p>
<p>The development version of GGIR can be found on <a href="https://github.com/wadpac/GGIR" class="external-link">github</a>, which is also where
you will find <a href="https://github.com/wadpac/GGIR/blob/master/CONTRIBUTING.md" class="external-link">guidance</a>
on how to contribute.</p>
<p><strong>How can I get service and support?</strong></p>
<p>GGIR is open source software and does not come with service or
support guarantees. However, as user-community you can help each other
via the <a href="https://groups.google.com/forum/#!forum/RpackageGGIR" class="external-link">GGIR google
group</a> or the <a href="https://github.com/wadpac/GGIR/issues" class="external-link">GitHub
issue tracker</a>. Please use these public platform rather than private
e-mails such that other users can learn from the conversations.</p>
<p>If you need dedicated support with the use of GGIR or need someone to
adapt GGIR to your needs then Vincent van Hees is available as <a href="https://www.accelting.com/" class="external-link">independent consultant</a>.</p>
<p><strong>Training in R essentials and GGIR</strong> We offer frequent
online GGIR training courses. Check our dedicated training <a href="https://www.accelting.com/ggir-training/" class="external-link">website</a> with more
details and the option to book your training. Do you have questions
about the training or the booking process? Do not hesitate to contact us
via: <a href="mailto:training@accelting.com" class="email">training@accelting.com</a>.</p>
<p>Also of interest may be the brief <a href="https://www.accelting.com/updates/short-r-tutorial/" class="external-link">free R
introduction tutorial</a>.</p>
<p><strong>Change log</strong></p>
<p>Our log of main changes to GGIR over time can be found <a href="https://cran.r-project.org/package=GGIR/news.html" class="external-link">here</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="setting-up-your-work-environment">Setting up your work environment<a class="anchor" aria-label="anchor" href="#setting-up-your-work-environment"></a>
</h2>
<div class="section level3">
<h3 id="install-r-and-rstudio">Install R and RStudio<a class="anchor" aria-label="anchor" href="#install-r-and-rstudio"></a>
</h3>
<p><a href="https://cran.r-project.org/" class="external-link">Download and install R</a></p>
<p><a href="https://posit.co/products/open-source/rstudio/" class="external-link">Download and
install RStudio</a></p>
<p>Install GGIR with its dependencies from CRAN. You can do this with
one command from the console command line:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"GGIR"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, to install the latest development version with the
latest bug fixes use instead:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"wadpac/GGIR"</span><span class="op">)</span></span></code></pre></div>
<p>Additionally, in some use-cases you will need to install one or
multiple additional packages:</p>
<ul>
<li>If you are working with Axivity, GENEActiv, or GENEA files, install
the GGIRread package with <code>install.packages("GGIRread")</code>
</li>
<li>If you are working with ActiGraph gt3x files, install the read.gt3x
package with <code>install.packages("read.gt3x")</code>
</li>
<li>If you want to derive Neishabouricounts (with
<code>do.neishabouricounts = TRUE</code>), install the actilifecounts
package with <code>install.packages("actilifecounts")</code>
</li>
<li>If you want to derive circadian rhythm indicators using the <a href="#cosinor-analysis-and-extended-cosinor-analysis">Cosinor analysis
and Extended Cosinor analysis</a> (with <code>cosinor = TRUE</code>),
install the ActCR package with
<code>install.packages("ActCR")</code>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="prepare-folder-structure">Prepare folder structure<a class="anchor" aria-label="anchor" href="#prepare-folder-structure"></a>
</h3>
<ol style="list-style-type: decimal">
<li>GGIR works with the following accelerometer brands and formats:
<ul>
<li>
<a href="https://activinsights.com/" class="external-link">GENEActiv</a> .bin</li>
<li>
<a href="https://axivity.com/" class="external-link">Axivity</a> AX3 and AX6 .cwa</li>
<li>
<a href="https://theactigraph.com" class="external-link">ActiGraph</a> .csv and .gt3x
(.gt3x only the newer format generated with firmware versions above
2.5.0. Serial numbers that start with “NEO” or “MRA” and have firmware
version of 2.5.0 or earlier use an older format of the .gt3x file). Note
for Actigraph users: If you want to work with .csv exports via the
commercial ActiLife software then note that you have the option to
export data with timestamps. Please do not do this as this causes memory
issues for GGIR. To cope with the absence of timestamps GGIR will
calculate timestamps from the sample frequency, the start time and start
date as presented in the file header.</li>
<li>
<a href="https://www.movisens.com/en/" class="external-link">Movisens</a> with data stored
in folders.</li>
<li>Any other accelerometer brand that generates csv output, see
documentation for functions <code>read.myacc.csv</code> and argument
<code>rmc.noise</code> in the <a href="https://CRAN.R-project.org/package=GGIR/GGIR.pdf" class="external-link">GGIR function
documentation (pdf)</a>. Note that functionality for the following file
formats was part of GGIR but has been deprecated as it required a
significant maintenance effort without a clear use case or community
support: (1) .bin for the Genea monitor by Unilever Discover, an
accelerometer that was used for some studies between 2007 and 2012)
.bin, and (2) .wav files as can be exported by the Axivity Ltd OMGUI
software. Please contact us if you think these data formats should be
facilitated by GGIR again and if you are interested in supporting their
ongoing maintenance.</li>
</ul>
</li>
<li>All accelerometer data that needs to be analysed should be stored in
one folder, or subfolders of that folder.</li>
<li>Give the folder an appropriate name, preferable with a reference to
the study or project it is related to rather than just ‘data’, because
the name of this folder will be used later on as an identifier of the
dataset.</li>
</ol>
</div>
<div class="section level3">
<h3 id="ggir-shell-function">GGIR shell function<a class="anchor" aria-label="anchor" href="#ggir-shell-function"></a>
</h3>
<p>GGIR comes with a large number of functions and optional settings
(arguments) per functions.</p>
<p>To ease interacting with GGIR there is one central function, named
<code>GGIR</code>, to talk to all the other functions. In the past this
function was called <code>g.shell.GGIR</code>, but we decided to shorten
it to <code>GGIR</code> for convenience. You can still use
<code>g.shell.GGIR</code> because <code>g.shell.GGIR</code> has become a
wrapper function around <code>GGIR</code> passing on all arguments to
<code>GGIR</code> and by that providing identical functionality.</p>
<p>In this paragraph we will guide you through the main arguments to
<code>GGIR</code> relevant for 99% of research. First of all, it is
important to understand that the GGIR package is structured in two
ways.</p>
<p>Firstly, it has a computational structure of five parts which are
applied sequentially to the data, and that <code>GGIR</code> controls
each of these parts:</p>
<ul>
<li>Part 1: Loads the data and stores derived features (aggregations)
needed for the other parts. This is the time-consuming part. Once this
is done, parts 2-5 can be run (or re-run with different parameters in
parts 2-5) relatively quickly.</li>
<li>Part 2: Data quality analyses and low-level description of signal
features per day and per file. At this point a day is defined from
midnight to midnight</li>
<li>Part 3: Estimation of sustained inactivity and sleep periods, needed
for input to Part 4 for sleep detection</li>
<li>Part 4: Labels the sustained inactive periods detected in Part 3 as
sleep, or daytime sustained inactivity, per night and per file</li>
<li>Part 5: Derives sleep and physical activity characteristics by
re-using information derived in part 2, 3 and 4. Total time in intensity
categories, the number of bouts, time spent in bouts and average
acceleration (overall activity) is calculated.</li>
</ul>
<p>The reason why it split up in parts is that it avoids having the
re-do all analysis if you only want to make a small change in the more
downstream parts. The specific order and content of the parts has grown
for historical and computational reasons.</p>
<p>Secondly, the function arguments which we will refer to as input
parameters are structured thematically independently of the five parts
they are used in:</p>
<ul>
<li>params_rawdata: parameters related to handling the raw data such as
resampling or calibrating</li>
<li>params_metrics: parameters related to aggregating the raw data to
epoch level summary metrics</li>
<li>params_sleep: parameters related to sleep detection</li>
<li>params_physact: parameters related to physical activity</li>
<li>params_247: parameters related to 24/7 behaviours that do not fall
into the typical sleep or physical activity research category.</li>
<li>params_output: parameters relating to how and whether output is
stored.</li>
<li>params_general: general parameters not covered by any of the above
categories</li>
</ul>
<p>This structure was introduced in GGIR version 2.5-6 to make the GGIR
code and documentation easier to navigate.</p>
<p>To see the parameters in each parameter category and their default
values do:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/load_params.html">load_params</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you are only interested in one specific category like sleep:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/load_params.html">load_params</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">params_sleep</span><span class="op">)</span></span></code></pre></div>
<p>If you are only interested in parameter “HASIB.algo” from the
sleep_params object:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/load_params.html">load_params</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">params_sleep</span><span class="op">[[</span><span class="st">"HASIB.algo"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Documentation for all arguments in the parameter objects can be found
the vignette: <a href="https://cran.r-project.org/package=GGIR" class="external-link">GGIR
configuration parameters</a>.</p>
<p>All of these arguments are accepted as argument to function
<code>GGIR</code>, because <code>GGIR</code> is a shell around all GGIR
functionality. However, the <code>params_</code> objects themselves can
not be provided as input to <code>GGIR</code>.</p>
<div class="section level4">
<h4 id="key-general-arguments">Key general arguments<a class="anchor" aria-label="anchor" href="#key-general-arguments"></a>
</h4>
<p>You will probably never need to think about most of the arguments
listed above, because a lot of arguments are only included to facilitate
methodological studies where researchers want to have control over every
little detail. See previous paragraph for links to the documentation and
how to find the default value of each parameter.</p>
<p>The bare minimum input needed for <code>GGIR</code> is:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir<span class="op">=</span><span class="st">"C:/mystudy/mydata"</span>,</span>
<span> outputdir<span class="op">=</span><span class="st">"D:/myresults"</span><span class="op">)</span></span></code></pre></div>
<p>Argument <code>datadir</code> allows you to specify where you have
stored your accelerometer data and <code>outputdir</code> allows you to
specify where you would like the output of the analyses to be stored.
This cannot be equal to <code>datadir</code>. If you copy paste the
above code to a new R script (file ending with .R) and Source it in
R(Studio) then the dataset will be processed and the output will be
stored in the specified output directory.</p>
<p>Below we have highlighted the key arguments you may want to be aware
of. We are not giving a detailed explanation, please see the package
manual for that.</p>
<ul>
<li>
<code>mode</code> - which part of GGIR to run, GGIR is constructed
in five parts.</li>
<li>
<code>overwrite</code> - whether to overwrite previously produced
milestone output. Between each GGIR part, GGIR stores milestone output
to ease re-running parts of the pipeline.</li>
<li>
<code>idloc</code> - tells GGIR where to find the participant ID
(default: inside file header)</li>
<li>
<code>strategy</code> - informs GGIR how to consider the design of
the experiment.
<ul>
<li>If <code>strategy</code> is set to value 1, then check out arguments
<code>hrs.del.start</code> and <code>hrs.del.end</code>.</li>
<li>If <code>strategy</code> is set to value 3 or 5, then check out
arguments <code>ndayswindow</code>.</li>
</ul>
</li>
<li>
<code>maxdur</code> - maximum number of days you expect in a data
file based on the study protocol.</li>
<li>
<code>desiredtz</code> - time zone of the experiment.</li>
<li>
<code>chunksize</code> - a way to tell GGIR to use less memory,
which can be useful on machines with limited memory.</li>
<li>
<code>includedaycrit</code> - tell GGIR how many hours of valid data
per day (midnight-midnight) is acceptable.</li>
<li>
<code>includenightcrit</code> - tell GGIR how many hours of a valid
night (noon-noon) is acceptable.</li>
<li>
<code>qwindow</code> - argument to tell GGIR whether and how to
segment the day for day-segment specific analysis.</li>
<li>
<code>mvpathreshold</code> and <code>boutcriter</code> -
acceleration threshold and bout criteria used for calculating time spent
in MVPA (only used in GGIR part2).</li>
<li>
<code>epochvalues2csv</code> - to export epoch level magnitude of
acceleration to a csv files (in addition to already being stored as
RData file)</li>
<li>
<code>dayborder</code> - to decide whether the edge of a day should
be other than midnight.</li>
<li>
<code>iglevels</code> - argument related to intensity gradient
method proposed by A. Rowlands.</li>
<li>
<code>do.report</code> - specify reports that need to be
generated.</li>
<li>
<code>viewingwindow</code> and <code>visualreport</code> - to create
a visual report, this only works when all five parts of GGIR have
successfully run. Note that the visual report was initially developed to
provide something to show to study participants and not for data quality
checking purposes. Over time we have improved the visual report to also
be useful for QC-ing the data. however, some of the scorings as shown in
the visual report are created for the visual report only and may not
reflect the scorings in the main GGIR analyses as reported in the
quantitative csv-reports. Most of our effort in the past 10 years has
gone into making sure that the csv-report are correct, while the
visualreport has mostly been a side project. This is unfortunate and we
hope to find funding in the future to design a new report specifically
for the purpose of QC-ing the anlayses done by GGIR.</li>
<li>
<code>maxRecordingInterval</code> - if specified controls whether
neighboring or overlapping recordings with the same participant ID and
brand are appended at epoch level. This can be useful when the intention
is to monitor behaviour over larger periods of time but accelerometers
only allow for a few weeks of data collection. GGIR will never append or
alter the raw input file, this operation is preformed on the derived
data.</li>
</ul>
</div>
<div class="section level4">
<h4 id="key-arguments-related-to-sleep-analysis">Key arguments related to sleep analysis<a class="anchor" aria-label="anchor" href="#key-arguments-related-to-sleep-analysis"></a>
</h4>
<p>For an explanation on how sleep is detected and the specific role of
the various function arguments see section <a href="#Sleep_analysis">Sleep analysis</a>.</p>
<ul>
<li>Arguments related to configuring the sleep detection algorithm:
<code>anglethreshold</code>, <code>timethreshold</code>,
<code>HASPT.algo</code>, <code>HASIB.algo</code>,
<code>Sadeh_axis</code>, and <code>HASPT.ignore.invalid</code>.</li>
<li>
<code>ignorenonwear</code> if set to TRUE then ignore detected
monitor non-wear periods in the detection of sustained inactivity bouts
to avoid confusion between monitor non-wear time.</li>
<li>If you want to create a visualisation of how sleep period time and
sustained inactivity bouts match throughout a day then consider
arguments <code>do.visual</code>, <code>outliers.only</code>, and
<code>criterror</code>.</li>
<li>If you want to exclude the first and last night from the sleep
analysis then used <code>excludefirstlast</code>.</li>
<li>
<code>def.noc.sleep</code> specifies how the sleep period time
window should be estimated if no sleeplog is used.</li>
<li>
<code>includenightcrit</code> Minimum number of valid hours per
night (24 hour window between noon and noon or 6pm-6pm).</li>
<li>
<code>data_cleaning_file</code> to ginore specific nights for
specific individuals, see also section <a href="#Data_cleaning_file">Data cleaning file</a>.</li>
<li>If you want the sleep analysis to be guided by a sleeplog (diary)
then check out arguments <code>loglocation</code> which specifies the
location of the spreadsheet (csv) with sleep log information. Further,
use arguments <code>colid</code> and <code>coln1</code> to specify the
details of your sleep log structure.</li>
</ul>
<p>GGIR facilitates two possible sleeplog file structures:</p>
<div class="section level5">
<h5 id="basic-sleep-log">Basic sleep log<a class="anchor" aria-label="anchor" href="#basic-sleep-log"></a>
</h5>
<p>Example of a basic sleeplog:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="6%">
<col width="12%">
<col width="13%">
<col width="12%">
<col width="13%">
<col width="12%">
<col width="13%">
<col width="12%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th>ID</th>
<th>onset_N1</th>
<th>wakeup_N1</th>
<th>onset_N2</th>
<th>wakeup_N2</th>
<th>onset_N3</th>
<th>wakeup_N3</th>
<th>onset_N4</th>
<th>…</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>123</td>
<td>22:00:00</td>
<td>09:00:00</td>
<td>21:00:00</td>
<td>08:00:00</td>
<td>23:45:00</td>
<td>06:30:00</td>
<td>00:00:00</td>
<td>…</td>
</tr>
<tr class="even">
<td>345</td>
<td>21:55:00</td>
<td>08:47:00</td>
<td></td>
<td></td>
<td>23:45:00</td>
<td>06:30:00</td>
<td>00:00:00</td>
<td>…</td>
</tr>
</tbody>
</table>
<ul>
<li>One column for participant id, this does not have to be the first
column. Specify which column it is with argument
<code>colid</code>.</li>
<li>Alternatingly one column for onset time and one column for waking
time. Specify which column is the column for the first night by argument
<code>coln1</code>, in the above example <code>coln1=2</code>.</li>
<li>Timestamps are to be stored without date as in hh:mm:ss with hour
values ranging between 0 and 23 (not 24). If onset corresponds to lights
out or intention to fall asleep, then it specify
<code>sleepwindowType = "TimeInBed"</code>.</li>
<li>There can be multiple sleeplogs in the same spreadsheet. Each row
representing a single recording.</li>
<li>First row: The first row of the spreadsheet needs to be filled with
column names. For the basic sleep log format it does not matter what
these column names are.</li>
</ul>
</div>
<div class="section level5">
<h5 id="advanced-sleep-log">Advanced sleep log<a class="anchor" aria-label="anchor" href="#advanced-sleep-log"></a>
</h5>
<p>Example of an advanced sleeplog for two recordings:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="10%">
</colgroup>
<thead><tr class="header">
<th>ID</th>
<th>D1_date</th>
<th>D1_wakeup</th>
<th>D1_inbed</th>
<th>D1_nap_start</th>
<th>D1_nap_end</th>
<th>D1_nonwear1_off</th>
<th>D1_nonwear1_on</th>
<th>D2_date</th>
<th>…</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>123</td>
<td>30/03/2015</td>
<td>09:00:00</td>
<td>22:00:00</td>
<td>11:15:00</td>
<td>11:45:00</td>
<td>13:35:00</td>
<td>14:10:00</td>
<td>31/03/2015</td>
<td>…</td>
</tr>
<tr class="even">
<td>567</td>
<td>20/04/2015</td>
<td>08:30:00</td>
<td>23:15:00</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>21/04/2015</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>Relative to the basic sleeplog format the advanced sleep log format
comes with the following changes:</p>
<ul>
<li>Recording are stored in rows, while all information per days are
stored in columns.</li>
<li>Information per day is preceded by one columns that holds the
calendar date. GGIR has been designed to recognise and handle any date
format but assumes that you have used the same date format consistently
through the sleeplog.</li>
<li>Per calendar date there is a column for wakeup time and followed by
a column for onset or in-bed time. Note that this is different from the
basic sleep log, where wakeup time follows the column for onset or
in-bed time. So, the advanced sleep log is calendar date oriented:
asking the participant when they woke up and when the fell asleep on a
certain date. However, if the sleep onset time is at 2am, you should
still fill in the 02:00:00, even though it is the 02:00:00 of the next
calendar date.</li>
<li>You can add columns relating to self-reported napping time and
nonwear time. These are not used for the sleep analysis in g.part3 and
g.part4, but used in g.part5 to facilitate napping analysis, see
argument <code>do.sibreport</code> and the paragraph on naps. Multiple
naps and multiple nonwear periods can be entered per day.</li>
<li>Leave cells for missing values blank.</li>
<li>Column names are critical for the advanced sleeplog format: Date
columns are recognised by GGIR as any column name with the word “date”
in it. The advanced sleep log format is recognised by GGIR by looking
out for the occurrence of at least two columnnames with the word “date”
in their name. Wakeup times are recognised with the words “wakeup” in
the column name. Sleeponset, to bed or in bed times are recognised as
the columns with any of the following character combinations in their
name: “onset”, “inbed”, “tobed”, or “lightsout”. Napping times are
recognised by columns with the word “nap” in their name. Nonwear times
are recognised by columns with the word “nonwear” in their name.</li>
</ul>
</div>
</div>
<div class="section level4">
<h4 id="key-arguments-related-to-time-use-analysis">Key arguments related to time use analysis<a class="anchor" aria-label="anchor" href="#key-arguments-related-to-time-use-analysis"></a>
</h4>
<p>For an explanation on how time use analysis is performed see section
<a href="#Waking-waking_or_24_hour">Waking-waking or 24 hour time-use
analysis</a>.</p>
<ul>
<li>
<code>excludefirstlast.part5</code> - whether to ignore the last and
first day.</li>
<li>
<code>includedaycrit.part5</code> - tell GGIR what fraction of the
waking hours in a day (value below 1) is acceptable.</li>
<li>
<code>minimum_MM_length.part5</code> - tell GGIR what the minimum
length (hours) should be of the MM window in part 5.</li>
<li>Configure thresholds for acceleration levels (some may want to
interpret this as intensity levels): <code>threshold.lig</code>,
<code>threshold.mod</code>, <code>threshold.vig</code>.</li>
<li>Configure what fraction of a bout needs to meet the threshold
(cut-point) crtieria <code>boutcriter.in</code>,
<code>boutcriter.lig</code>, <code>boutcriter.mvpa</code>. Note that
boutcriter.mvpa = 0.8 means that an MVPA bout can have interruptions
(i.e., the time out of MVPA intensity) that meet the following criteria:
<ol style="list-style-type: decimal">
<li>A single interruption can last &lt; 1 min</li>
<li>Repeated interruptions are allowed provided that their total time
does not exceed 20% of the bout duration</li>
<li>The time spent in the interruptions is included in the duration of
the MVPA bout. For example: A 25-minute bout can have two 1 minute
interruption, but not a single 2-minute interruption. Here, the full 25
minutes would count towards the duration of the MVPA bout.</li>
</ol>
</li>
<li>
<code>timewindow</code> to specify whether days should be defined
from midnight to midnight <code>"MM"</code>, from waking-up to waking-up
<code>"WW"</code>, or both <code>c("MM","WW")</code>.</li>
<li>Configure durations of bouts: <code>boutdur.mvpa</code>,
<code>boutdur.in</code>, and <code>boutdur.lig</code>. Note that this
can be a vector of multiple values indicating the minimum and maximum
duration of subsequent bout types, e.g. 1-5 minutes MVPA, 5-10 minutes
MVPA, and longer than 10 minutes MVPA.</li>
</ul>
</div>
<div class="section level4">
<h4 id="published-cut-points-and-how-to-use-them">Published cut-points and how to use them<a class="anchor" aria-label="anchor" href="#published-cut-points-and-how-to-use-them"></a>
</h4>
<p>This section has been rewritten and moved. Please, visit the vignette
<a href="https://cran.r-project.org/package=GGIR" class="external-link">Published cut-points
and how to use them in GGIR</a> for more details on the cut-points
available, how to use them, and some additional reflections on the use
of cut-points in GGIR.</p>
</div>
<div class="section level4">
<h4 id="example-call">Example call<a class="anchor" aria-label="anchor" href="#example-call"></a>
</h4>
<p>If you consider all the arguments above you me may end up with a call
to <code>GGIR</code> that could look as follows.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>mode<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>,</span>
<span>      datadir<span class="op">=</span><span class="st">"C:/mystudy/mydata"</span>,</span>
<span>      outputdir<span class="op">=</span><span class="st">"D:/myresults"</span>,</span>
<span>      do.report<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>,</span>
<span>      <span class="co">#=====================</span></span>
<span>      <span class="co"># Part 2</span></span>
<span>      <span class="co">#=====================</span></span>
<span>      strategy <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      hrs.del.start <span class="op">=</span> <span class="fl">0</span>,          hrs.del.end <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      maxdur <span class="op">=</span> <span class="fl">9</span>,                 includedaycrit <span class="op">=</span> <span class="fl">16</span>,</span>
<span>      qwindow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">24</span><span class="op">)</span>,</span>
<span>      mvpathreshold <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>      excludefirstlast <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      includenightcrit <span class="op">=</span> <span class="fl">16</span>,</span>
<span>      <span class="co">#=====================</span></span>
<span>      <span class="co"># Part 3 + 4</span></span>
<span>      <span class="co">#=====================</span></span>
<span>      def.noc.sleep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      outliers.only <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      criterror <span class="op">=</span> <span class="fl">4</span>,</span>
<span>      do.visual <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      <span class="co">#=====================</span></span>
<span>      <span class="co"># Part 5</span></span>
<span>      <span class="co">#=====================</span></span>
<span>      threshold.lig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span>, threshold.mod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,  threshold.vig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span><span class="op">)</span>,</span>
<span>      boutcriter <span class="op">=</span> <span class="fl">0.8</span>,      boutcriter.in <span class="op">=</span> <span class="fl">0.9</span>,     boutcriter.lig <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>      boutcriter.mvpa <span class="op">=</span> <span class="fl">0.8</span>, boutdur.in <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span>,<span class="fl">30</span><span class="op">)</span>, boutdur.lig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>      boutdur.mvpa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>      includedaycrit.part5 <span class="op">=</span> <span class="fl">2</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>      <span class="co">#=====================</span></span>
<span>      <span class="co"># Visual report</span></span>
<span>      <span class="co">#=====================</span></span>
<span>      timewindow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"WW"</span><span class="op">)</span>,</span>
<span>      visualreport<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once you have used <code>GGIR</code> and the output directory
(outputdir) will be filled with milestone data and results.</p>
</div>
<div class="section level4">
<h4 id="configuration-file">Configuration file<a class="anchor" aria-label="anchor" href="#configuration-file"></a>
</h4>
<p>Function <code>GGIR</code> stores all the explicitly entered argument
values and default values for the argument that are not explicitly
provided in a csv-file named config.csv stored in the root of the output
folder. The config.csv file is accepted as input to <code>GGIR</code>
with argument <code>configfile</code> to replace the specification of
all the arguments, except <code>datadir</code> and
<code>outputdir</code>, see example below.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/wadpac/GGIR/" class="external-link">GGIR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>datadir<span class="op">=</span><span class="st">"C:/mystudy/mydata"</span>,</span>
<span>             outputdir<span class="op">=</span><span class="st">"D:/myresults"</span>, configfile <span class="op">=</span> <span class="st">"D:/myconfigfiles/config.csv"</span><span class="op">)</span></span></code></pre></div>
<p>The practical value of this is that it eases the replication of
analysis, because instead of having to share you R script, sharing your
config.csv file will be sufficient. Further, the config.csv file
contribute to the reproducibility of your data analysis.</p>
<p>Note 1: When combining a configuration file with explicitly provided
argument values, the explicitly provided argument values will overrule
the argument values in the configuration file. Note 2: The config.csv
file in the root of the output folder will be overwritten every time you
use <code>GGIR</code>. So, if you would like to add annotations in the
file, e.g. in the fourth column, then you will need to store it
somewhere outside the output folder and explicitly point to it with
<code>configfile</code> argument.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="time-for-action-how-to-run-your-analysis">Time for action: How to run your analysis?<a class="anchor" aria-label="anchor" href="#time-for-action-how-to-run-your-analysis"></a>
</h2>
<div class="section level3">
<h3 id="from-the-r-console-on-your-own-desktoplaptop">From the R console on your own desktop/laptop<a class="anchor" aria-label="anchor" href="#from-the-r-console-on-your-own-desktoplaptop"></a>
</h3>
<p>Create an R-script and put the GGIR call in it. Next, you can source
the R-script with the <code>source</code> function in R:</p>
<p><code>source("pathtoscript/myshellscript.R")</code></p>
<p>or use the Source button in RStudio if you use RStudio.</p>
</div>
<div class="section level3">
<h3 id="in-a-cluster">In a cluster<a class="anchor" aria-label="anchor" href="#in-a-cluster"></a>
</h3>
<p>GGIR by default support multi-thread processing, which can be turned
off by seting argument <code>do.parallel = FALSE</code>. If this is
still not fast enough then we advise using a GGIR on a computing
cluster. The way we did it on a Sun Grid Engine cluster is shown below,
please note that some of these commands are specific to the computing
cluster you are working on. Also, you may actually want to use an R
package like clustermq or snowfall, which avoids having to write bash
script. Please consult your local cluster specialist to tailor this to
your situation. In our case, we had three files for the SGE setting:</p>
<p><strong>submit.sh</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">707</span><span class="dt">}</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="va">n</span><span class="op">=</span>1</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="va">s</span><span class="op">=</span><span class="va">$(($(($n</span> <span class="op">*</span> $<span class="op">[</span><span class="va">$i</span>-1<span class="op">]</span><span class="va">))</span><span class="op">+</span><span class="dv">1</span><span class="va">))</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="va">e</span><span class="op">=</span><span class="va">$(($i</span> <span class="op">*</span> <span class="va">$n))</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="ex">qsub</span> /home/nvhv/WORKING_DATA/bashscripts/run-mainscript.sh <span class="va">$s</span> <span class="va">$e</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
<p><strong>run-mainscript.sh</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#! /bin/bash</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#$ -cwd -V</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#$ -l h_vmem=12G</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="ex">/usr/bin/R</span> <span class="at">--vanilla</span> <span class="at">--args</span> f0=<span class="va">$1</span> f1=<span class="va">$2</span> <span class="op">&lt;</span> /home/nvhv/WORKING_DATA/test/myshellscript.R</span></code></pre></div>
<p><strong>myshellscript.R</strong></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>echo<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">args</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/commandArgs.html" class="external-link">commandArgs</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">args</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">args</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">args</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="../reference/GGIR.html">GGIR</a></span><span class="op">(</span>f0<span class="op">=</span><span class="va">f0</span>,f1<span class="op">=</span><span class="va">f1</span>,<span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>You will need to update the <code>...</code> in the last line with
the arguments you used for <code>GGIR</code>. Note that
<code>f0=f0,f1=f1</code> is essential for this to work. The values of
<code>f0</code> and <code>f1</code> are passed on from the bash
script.</p>
<p>Once this is all setup you will need to call
<code>bash submit.sh</code> from the command line.</p>
<p>With the help of computing clusters GGIR has successfully been run on
some of the worlds largest accelerometer data sets such as UK Biobank
and German NAKO study.</p>
</div>
<div class="section level3">
<h3 id="processing-time">Processing time<a class="anchor" aria-label="anchor" href="#processing-time"></a>
</h3>
<p>The time to process a typical seven day recording should be anywhere
in between 3 and 10 minutes depending on the sample frequency of the
recording, the sensor brand, data format, the exact configuration of
GGIR, and the specifications of your computer. If you are observing
processing times of 20 minutes or longer for a 7 day recording then
probably you are slowed down by other factors.</p>
<p>Some tips on how you may be able to address this:</p>
<ul>
<li>Make sure the data you process is on the same machine as where GGIR
is run. Processing data located somewhere else on a computer network can
substantially slow software down.</li>
<li>Make sure your machine has 8GB or more RAM memory, using GGIR on old
machines with only 4GB is known to be slow. However, total memory is not
the only bottle neck, also consider the number of processes (threads)
your CPU can run relative to the amount of memory. Ending up with 2GB
per process seems a good target.</li>
<li>Avoid doing other computational activities with your machine while
running GGIR. For example, if you use DropBox or OneDrive make sure they
do not sync while you are running GGIR. When using GGIR to process large
datasets it is probably best to not use the machine, but make sure the
machine is configured not to fall asleep as that would terminate the
analyses.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="inspecting-the-results">Inspecting the results<a class="anchor" aria-label="anchor" href="#inspecting-the-results"></a>
</h2>
<p>GGIR generates the following types of output. - csv-spreadsheets with
all the variables you need for physical activity, sleep and circadian
rhythm research - Pdfs with on each page a low resolution plot of the
data per file and quality indicators - R objects with milestone data -
Pdfs with a visual summary of the physical activity and sleep patterns
as identified (see example below)</p>
<p><img src="../../../R%20pkgs/GGIR/articles/reportexample.jpg" width="700px"></p>
<div class="section level3">
<h3 class="tabset" id="output-part-2">Output part 2<a class="anchor" aria-label="anchor" href="#output-part-2"></a>
</h3>
<p>Part 2 generates the following output:</p>
<ul>
<li>part2_summary.csv: Person level summary (see below)</li>
<li>part2_daysummary.csv: Day level summary (see below)</li>
<li>QC/data_quality_report.csv: Overview of calibration results and
whether or not a file was corrupt or too short to be processed,</li>
<li>QC/plots to check data quality 1.pdf: A pdf with visualisation of
the acceleration time series in 15 minute resolution and with invalid
data segments highlighted in colours (yellow: non-wear based on standard
deviation threshold, brown: non-wear after extra filtering step
(introduced in 2013), and purple: clipping)</li>
</ul>
<div class="section level4">
<h4 id="person-level-summary">Person level summary<a class="anchor" aria-label="anchor" href="#person-level-summary"></a>
</h4>
<table class="table">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>(Part of) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID</td>
<td>Participant id</td>
</tr>
<tr class="even">
<td>device_sn</td>
<td>Device serial number</td>
</tr>
<tr class="odd">
<td>bodylocation</td>
<td>Body location extracted from file header</td>
</tr>
<tr class="even">
<td>filename</td>
<td>Name of the data file</td>
</tr>
<tr class="odd">
<td>start_time</td>
<td>Timestamp when recording started</td>
</tr>
<tr class="even">
<td>startday</td>
<td>Day of the week on which recording started</td>
</tr>
<tr class="odd">
<td>samplefreq</td>
<td>Sample frequency (Hz)</td>
</tr>
<tr class="even">
<td>device</td>
<td>Accelerometer brand, e.g. GENEACtiv</td>
</tr>
<tr class="odd">
<td>clipping_score</td>
<td>The Clipping score: Fraction of 15 minute windows per file for which
the acceleration in one of the three axis was close to the maximum for
at least 80% of the time. This should be 0.</td>
</tr>
<tr class="even">
<td>meas_dur_dys</td>
<td>Measurement duration (days)</td>
</tr>
<tr class="odd">
<td>complete_24hcycle</td>
<td>Completeness score: Fraction of 15 minute windows per 24 hours for
which no valid data is available at any day of the measurement.</td>
</tr>
<tr class="even">
<td>meas_dur_def_proto_day</td>
<td>measurement duration according to protocol (days): Measurement
duration (days) minus the hours that are ignored at the beginning and
end of the measurement motivated by protocol design</td>
</tr>
<tr class="odd">
<td>wear_dur_def_proto_day</td>
<td>wear duration duration according to protocol (days): So, if the
protocol was seven days of measurement, then wearing the accelerometer
for 8 days and recording data for 8 days will still make that the wear
duration is 7 days</td>
</tr>
<tr class="even">
<td>calib_err</td>
<td>Calibration error (static estimate) Estimated based on all
‘non-movement’ periods in the measurement after applying the
autocalibration.</td>
</tr>
<tr class="odd">
<td>calib_status</td>
<td>Calibration status: Summary statement about the status of the
calibration error minimisation</td>
</tr>
<tr class="even">
<td>ENMO_fullRecordingMean</td>
<td>ENMO is the main summary measure of acceleration. The value
presented is the average ENMO over all the available data normalised per
24-hour cycles (diurnal balanced), with invalid data imputed by the
average at similar time points on different days of the week. In
addition to ENMO it is possible to extract other acceleration metrics
(i.e. BFEN, HFEN, HFENplus). We emphasize that it is calculated over the
full recording because the alternative is that a variable is only
calculated overmeasurement days with sufficient valid hours of
data.</td>
</tr>
<tr class="odd">
<td>ENMO</td>
<td>(only available if set to true in part1.R) ENMO is the main summary
measure of acceleration. The value presented is the average ENMO over
all the available data normalised per 24 hour cycles, with invalid data
imputed by the average at similar timepoints on different days of the
week. In addition to ENMO it is possible to extract other acceleration
metrics in part1.R (i.e. BFEN, HFEN, HFENplus) See also <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0061691" class="external-link">van
Hees PLoSONE April 2013</a> for a detailed description and comparison of
these techniques.</td>
</tr>
<tr class="even">
<td>pX_A_mg_0-24h_fullRecording</td>
<td>This variable represents the Xth percentile in the distribution of
short epoch metric value A of the average day. The average day may not
be ideal for describing the distribution. Therefore, the code also
extracts the following variable.</td>
</tr>
<tr class="odd">
<td>AD_pX_A_mg_0-24h</td>
<td>This variable represents the Xth percentile in the distribution of
short epoch metric value A per day averaged across all days.</td>
</tr>
<tr class="even">
<td>L5_A_mg_0-24</td>
<td>Average of metric A during the least active five* hours in the day
that is the lowest rolling average value of metric A. (* window size is
modifiable by argument <code>winhr</code>)</td>
</tr>
<tr class="odd">
<td>M5_A_mg_0-24</td>
<td>Average of metric A during the most active five* hours in the day
that is the lowest rolling average value of metric A. (* window size is
modifiable by argument <code>winhr</code>)</td>
</tr>
<tr class="even">
<td>L5hr_A_mg_0-24</td>
<td>Starting time in hours and fractions of hours of L5_A_mg_0-24</td>
</tr>
<tr class="odd">
<td>M5hr_A_mg_0-24</td>
<td>Starting time in hours and fractions of hours of M5_A_mg_0-24</td>
</tr>
<tr class="even">
<td>ig_gradient_ENMO_0 -24hr_fullRecording</td>
<td>Intensity gradient calculated over the full recording.</td>
</tr>
<tr class="odd">
<td>1to6am_ENMO_mg</td>
<td>Average metric value ENMO between 1am and 6am</td>
</tr>
<tr class="even">
<td>N valid WEdays</td>
<td>Number of valid weekend days</td>
</tr>
<tr class="odd">
<td>N valid WKdays</td>
<td>Number of valid week days</td>
</tr>
<tr class="even">
<td>IS_interdailystability</td>
<td>inter daily stability. The movement count that is derived for this
was an attempt to follow the original approach by Eus J. W. Van Someren
(Chronobiology International. 1999. Volume 16, issue 4).</td>
</tr>
<tr class="odd">
<td>IV_in tradailyvariability</td>
<td>intra daily variability. In contrast to the original paper, we
ignore the epoch transitions between the end of a day and the beginning
of the next day for the numerator of the equation, this to make it a
true measure of intradaily variability. Same note as for IS: The
movement count that is derived for this was an attempt to follow the
original approach.</td>
</tr>
<tr class="even">
<td>IVIS_windowsize_minutes</td>
<td>Sizes of the windows based on which IV and IS are calculated (note
that this is modifiable)</td>
</tr>
<tr class="odd">
<td>IVIS_epochsize_seconds</td>
<td>Argument has been deprecated</td>
</tr>
<tr class="even">
<td><code>AD_</code></td>
<td>All days (plain average of all available days, no weighting). The
variable was calculated per day and then averaged over all the available
days</td>
</tr>
<tr class="odd">
<td><code>WE_</code></td>
<td>Weekend days (plain average of all available days, no weighting).
The variable was calculated per day and then averaged over weekend days
only</td>
</tr>
<tr class="even">
<td><code>WD_</code></td>
<td>Week days (plain average of all available days, no weighting). The
variable was calculated per day and then averaged over week days
only</td>
</tr>
<tr class="odd">
<td><code>WWE_</code></td>
<td>Weekend days (weighted average) The variable was calculated per day
and then averaged over weekend days. Double weekend days are averaged.
This is only relevant for experiments that last for more than seven
days.</td>
</tr>
<tr class="even">
<td><code>WWD_</code></td>
<td>Week days (weighted average) The variable was calculated per day and
then averaged over week days. Double week days were averaged. This is
only relevant for experiments that last for more than seven days)</td>
</tr>
<tr class="odd">
<td>WWD_MVPA_E5S_T100_ENMO</td>
<td>Time spent in moderate-to-vigorous based on 5 second epoch size and
an ENMO metric threshold of 100</td>
</tr>
<tr class="even">
<td><code>WWE_MVPA_E5 S_B1M80%_T100_ENMO</code></td>
<td>Time spent in moderate-to-vigorous based on 5 second epoch size and
an ENMO metric threshold of 100 based on a bout criteria of 100</td>
</tr>
<tr class="odd">
<td><code>WE_[100, 150)_mg_0-24h_ENMO</code></td>
<td>Time spent between (and including) 100 mg and 150 (excluding 150
itself) between 0 and 24 hours (the full day) using metric ENMO data
exclusion strategy (value=1, ignore specific hours; value=2, ignore all
data before the first midnight and after the last midnight)</td>
</tr>
<tr class="even">
<td><code>_M VPA_E5S_B1M80_T100</code></td>
<td>MVPA calculated based on 5 second epoch setting bout duration 1
Minute and inclusion criterion of more than 80 percent. This is only
done for metric ENMO at the moment, and only if mvpa threshold is not
left blank</td>
</tr>
<tr class="odd">
<td><code>_ENMO_mg</code></td>
<td>ENMO or other metric was first calculated per day and then average
according to AD, WD, WWE, WWD</td>
</tr>
<tr class="even">
<td>data exclusion strategy</td>
<td>A log of the decision made when calling g.impute: value=1 mean
ignore specific hours; value=2 mean ignore all data before the first
midnight and after the last midnight</td>
</tr>
<tr class="odd">
<td>n hours ignored at start of meas (if strategy=1)</td>
<td>number of hours ignored at the start of the measurement (if strategy
= 1) A log of decision made in part2.R</td>
</tr>
<tr class="even">
<td>n hours ignored at end of meas (if strategy=1)</td>
<td>number of hours ignored at the end of the measurement (if strategy =
1). A log of decision made in part2.R</td>
</tr>
<tr class="odd">
<td>n hours ignored at end of meas (if strategy=1)</td>
<td>number of days of measurement after which all data is ignored (if
strategy = 1) A log of decision made in part2.R</td>
</tr>
<tr class="even">
<td>epoch size to which acceleration was averaged (seconds)</td>
<td>A log of decision made in part1.R</td>
</tr>
<tr class="odd">
<td>pdffilenumb</td>
<td>Indicator of in which pdf-file the plot was stored</td>
</tr>
<tr class="even">
<td>pdfpagecount</td>
<td>Indicator of in which pdf-page the plot was stored</td>
</tr>
<tr class="odd">
<td><code>cosinor_</code></td>
<td>Cosinor analysis estimates such as mes, amp, acrophase, and
acrotime, as documented in the <a href="https://CRAN.R-project.org/package=ActCR" class="external-link">Ac tCR</a> package.</td>
</tr>
<tr class="even">
<td><code>cosinorExt_</code></td>
<td>Extended Cosinor analysis estimates such as minimum, amp, alpha,
beta, acrotime, UpMesor, DownMesor, MESOR, and F_pseudo, as documented
in the <a href="https://CRAN.R-project.org/package=ActCR" class="external-link">Ac tCR</a>
package.</td>
</tr>
<tr class="odd">
<td><code>cosinorIV</code></td>
<td>Cosinor analysis compatible estimate of the Intradaily Variability
(IV)</td>
</tr>
<tr class="even">
<td><code>cosinorIS</code></td>
<td>Cosinor analysis compatible estimate of Interdaily Stability
(IS)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="day-level-summary">Day level summary<a class="anchor" aria-label="anchor" href="#day-level-summary"></a>
</h4>
<p>This is a non-exhaustive list, because most concepts have been
explained in summary.csv</p>
<table class="table">
<colgroup>
<col width="36%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>(Part of) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID</td>
<td>Participant id</td>
</tr>
<tr class="even">
<td>filename</td>
<td>Name of the data file</td>
</tr>
<tr class="odd">
<td>calender_date</td>
<td>Timestamp and date on which measurement started</td>
</tr>
<tr class="even">
<td>bodylocation</td>
<td>Location of the accelerometer as extracted from file header</td>
</tr>
<tr class="odd">
<td>N valid hours</td>
<td>Number of hours with valid data in the day</td>
</tr>
<tr class="even">
<td>N hours</td>
<td>Number of hours of measurement in a day, which typically is 24,
unless it is a day on which the clock changes (DST) resulting in 23 or
25 hours. The value can be less than 23 if the measurement started or
ended this day</td>
</tr>
<tr class="odd">
<td>weekday</td>
<td>Name of weekday</td>
</tr>
<tr class="even">
<td>measurement</td>
<td>Day of measurement Day number relative to start of the
measurement</td>
</tr>
<tr class="odd">
<td>L5hr_ENMO_mg_0-24h</td>
<td>Hour on which L5 starts for these 24 hours (defined with metric
ENMO)</td>
</tr>
<tr class="even">
<td>L5_ENMO_mg_0-24h</td>
<td>Average acceleration for L5 (defined with metric ENMO)</td>
</tr>
<tr class="odd">
<td><code>[A,B)_mg_0-24h_ENMO</code></td>
<td>Time spent in minutes between (and including) acceleration value A
in mg and (excluding) acceleration value B in mg based on metric
ENMO</td>
</tr>
<tr class="even">
<td>ig_gradient_ENMO_0-24hr</td>
<td>Gradient from intensity gradient analysis proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> based on metric ENMO for the time segment 0 to 24
hours</td>
</tr>
<tr class="odd">
<td>ig_intercept_ENMO_0-24hr</td>
<td>Intercept from intensity gradient analysis proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> based on metric ENMO for the time segment 0 to 24
hours</td>
</tr>
<tr class="even">
<td>ig_rsquared_ENMO_0-24hr</td>
<td>r squared from intensity gradient analysis proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> based on metric ENMO for the time segment 0 to 24
hours</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 class="tabset" id="output-part-4">Output part 4<a class="anchor" aria-label="anchor" href="#output-part-4"></a>
</h3>
<p>Part 4 generates the following output:</p>
<div class="section level4">
<h4 id="night-level-summaries">Night level summaries<a class="anchor" aria-label="anchor" href="#night-level-summaries"></a>
</h4>
<ul>
<li>part4_nightsummary_sleep_cleaned.csv</li>
<li>QC/part4_nightsummary_sleep_full.csv</li>
</ul>
<p>The csv. files contain the variables as shown below.</p>
<table class="table">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>(Part of) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ID</td>
<td>Participant ID extracted from file</td>
</tr>
<tr class="even">
<td>night</td>
<td>Number of the night in the recording</td>
</tr>
<tr class="odd">
<td>sleeponset</td>
<td>Detected onset of sleep expressed as hours since the midnight of the
previous night.</td>
</tr>
<tr class="even">
<td>wakeup</td>
<td>Detected waking time (after sleep period) expressed as hours since
the midnight of the previous night.</td>
</tr>
<tr class="odd">
<td>SptDuration</td>
<td>Difference between onset and waking time.</td>
</tr>
<tr class="even">
<td>sleepparam</td>
<td>Definition of sustained inactivity by accelerometer.</td>
</tr>
<tr class="odd">
<td>guider</td>
<td>guider used as discussed in paragraph <a href="#Sleep_analysis">Sleep analysis</a>.</td>
</tr>
<tr class="even">
<td>guider_onset</td>
<td>Start of Sleep Period Time window derived from the guider.</td>
</tr>
<tr class="odd">
<td>guider_wake</td>
<td>End of Sleep Period Time window derived guider.</td>
</tr>
<tr class="even">
<td>guider_SptDuration</td>
<td>Time SPT duration derived from guider_wake and guider_onset.</td>
</tr>
<tr class="odd">
<td>error_onset</td>
<td>Difference between sleeponset and guider_onset</td>
</tr>
<tr class="even">
<td>error_wake</td>
<td>Difference between wakeup and guider_wake</td>
</tr>
<tr class="odd">
<td>fraction_night_invalid</td>
<td>Fraction of the night (noon-noon or 6pm-6pm) for which the data was
invalid, e.g. monitor not worn or no accelerometer measurement
started/ended within the night.</td>
</tr>
<tr class="even">
<td>SleepDurationInSpt</td>
<td>Total sleep duration, which equals the accumulated nocturnal
sustained inactivity bouts within the Sleep Period Time.</td>
</tr>
<tr class="odd">
<td>duration_sib_wakinghours</td>
<td>Accumulated sustained inactivity bouts during the day. These are the
periods we would label during the night as sleep, but during the day
they form a subclass of inactivity, which may represent day time sleep
or wakefulness while being motionless for a sustained period of time
number_sib_sleepperiod} Number of nocturnal sleep periods, with
nocturnal referring to the Sleep Period Time window.</td>
</tr>
<tr class="even">
<td>duration_sib_wakinghours_atleast15min</td>
<td>Same as duration_sib_wakinghours, but limited to SIBs that last at
least 15 minutes.</td>
</tr>
<tr class="odd">
<td>num ber_sib_wakinghours</td>
<td>Number of sustained inactivity bouts during the day, with day
referring to the time outside the Sleep Period Time window.</td>
</tr>
<tr class="even">
<td>sleeponset_ts</td>
<td>sleeponset formatted as a timestamp</td>
</tr>
<tr class="odd">
<td>wakeup_ts</td>
<td>wakeup formatted as a timestamp</td>
</tr>
<tr class="even">
<td>guider_onset_ts</td>
<td>guider_onset formatted as a timestamp</td>
</tr>
<tr class="odd">
<td>guider_wake_ts</td>
<td>guider_wake formatted as a timestamp</td>
</tr>
<tr class="even">
<td>page</td>
<td>pdf page on which the visualisation can be found</td>
</tr>
<tr class="odd">
<td>daysleeper</td>
<td>If 0 then the person is a nightsleeper (sleep period did not overlap
with noon) if value=1 then the person is a daysleeper (sleep period did
overlap with noon)</td>
</tr>
<tr class="even">
<td>weekday</td>
<td>Day of the week on which the night started</td>
</tr>
<tr class="odd">
<td>calendardate</td>
<td>Calendar date on which the night started in day/month/year
format.</td>
</tr>
<tr class="even">
<td>filename</td>
<td>Name of the accelerometer file</td>
</tr>
<tr class="odd">
<td>cleaningcode</td>
<td>see paragraph <a href="#Cleaningcode">Cleaningcode</a>
</td>
</tr>
<tr class="even">
<td>sleeplog_used</td>
<td>Whether a sleep log was used (TRUE/FALSE)</td>
</tr>
<tr class="odd">
<td>acc_available</td>
<td>Whether accelerometer data was available (TRUE/FALSE).</td>
</tr>
<tr class="even">
<td>WASO</td>
<td>Wake After Sleep Onset: SptDuration - SleepDurationInSpt</td>
</tr>
<tr class="odd">
<td>SptDuration</td>
<td>Sleep Period Time window duration: wakeup - sleeponset</td>
</tr>
<tr class="even">
<td>error_onset</td>
<td>Difference between sleeponset and guider_onset (this variable is
only available in the full report as stored in the QC folder)</td>
</tr>
<tr class="odd">
<td>error_wake</td>
<td>Difference between wakeup and guider_wake (this variable is only
available in the full report as stored in the QC folder)</td>
</tr>
<tr class="even">
<td>SleepRegularityIndex</td>
<td>The Sleep Regularity Index as proposed by <a href="https://www.nature.com/articles/s41598-017-03171-4" class="external-link">Phillips et
al. 2017</a>, but calculated per day-pair to enable user to study
patterns across days</td>
</tr>
<tr class="odd">
<td>SriFractionValid</td>
<td>Fraction of the 24 hour period that was valid in both current as
well as in matching timestamps for the next calendar day. See GGIR
function manual for details</td>
</tr>
<tr class="even">
<td>nonwear_perc_spt</td>
<td>Non-wear percentage during the spt hours of this day. This is a copy
of the nonwear_perc_spt calculated in <a href="#output5">part 5</a>,
only included in part 4 reports if part 5 has been run with timewindow =
WW</td>
</tr>
</tbody>
</table>
<div class="section level5">
<h5 id="non-default-variables-in-part-4-csv-report">Non-default variables in part 4 csv report<a class="anchor" aria-label="anchor" href="#non-default-variables-in-part-4-csv-report"></a>
</h5>
<p>These additional are only stored if you used a sleeplog that captures
time in bed, or when using guider HorAngle for hip-worn accelerometer
data. If either of these applies set argument
<code>sleepwindowType</code> to “TimeInBed”.</p>
<table class="table">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>(Part of) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>guider_guider_inbedStart</td>
<td>Time of getting in bed</td>
</tr>
<tr class="even">
<td>guider_guider_inbedEnd</td>
<td>Time of getting out of bed</td>
</tr>
<tr class="odd">
<td>guider_inbedDuration</td>
<td>Time in Bed: guider_inbedEnd - guider_inbedStart</td>
</tr>
<tr class="even">
<td>sleepefficiency</td>
<td>Sleep efficiency, calculated as: SleepDurationInSpt /
guider_inbedDuration or SleepDurationInSpt / (Spt + latency) as defined
with <code>relyonguider_SleepEfficiency</code>
</td>
</tr>
<tr class="odd">
<td>sleeplatency</td>
<td>Sleep latency, calculated as: sleeponset - guider_inbedStart</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level4">
<h4 id="person-level-summaries">Person level summaries<a class="anchor" aria-label="anchor" href="#person-level-summaries"></a>
</h4>
<ul>
<li>part4_summary_sleep_cleaned.csv</li>
<li>QC/part4_summary_sleep_full.csv</li>
</ul>
<p>In the person level report the variables are derived from the
variables in the night level summary. Minor extensions to the variable
names explain how variables are aggregated across the days. Please find
below extra clarification on a few of the variable names for which the
meaning may not be obvious:</p>
<table class="table">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>(Part of) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>_mn</code></td>
<td>mean across days</td>
</tr>
<tr class="even">
<td><code>_sd</code></td>
<td>standard deviation across days</td>
</tr>
<tr class="odd">
<td><code>_AD</code></td>
<td>All days</td>
</tr>
<tr class="even">
<td><code>_WE</code></td>
<td>Weekend days</td>
</tr>
<tr class="odd">
<td><code>_WD</code></td>
<td>Week days</td>
</tr>
<tr class="even">
<td>sleeplog_used</td>
<td>Whether a sleeplog was available (TRUE) or not (FALSE)</td>
</tr>
<tr class="odd">
<td>sleep_efficiency</td>
<td>Accelerometer derived sleep efficiency within the sleep period time
calculated as the ratio between acc_SleepDurationInSpt and
guider_SptDuration (denominator) or acc_SleepDurationInSpt and
acc_SptDuration + latency (denominator), as defined with
relyonguider_SleepEfficiency. Only available at person level, because at
night level the user can calculate this from existing variables.</td>
</tr>
<tr class="even">
<td>n_nights_acc</td>
<td>Number of nights of accelerometer data</td>
</tr>
<tr class="odd">
<td>n_nights_sleeplog</td>
<td>Number of nights of sleeplog data.</td>
</tr>
<tr class="even">
<td>n_WE_nights_complete</td>
<td>Number of weekend nights complete which means both accelerometer and
estimate from guider.</td>
</tr>
<tr class="odd">
<td>n_WD_nights_complete</td>
<td>Number of weekday nights complete which means both accelerometer and
estimate from guider.</td>
</tr>
<tr class="even">
<td>n_WEnights_daysleeper</td>
<td>Number of weekend nights on which the person slept until after
noon.</td>
</tr>
<tr class="odd">
<td>n_WDnights_daysleeper</td>
<td>Number of weekday nights on which the person slept until after
noon.</td>
</tr>
<tr class="even">
<td>duration_sib_wakinghour</td>
<td>Total duration of sustained inactivity bouts during the waking
hours.</td>
</tr>
<tr class="odd">
<td>number_sib_wakinghours</td>
<td>Number of sustained inactivity bouts during the waking hours.</td>
</tr>
<tr class="even">
<td>average_dur_sib_wakinghours</td>
<td>Average duration of the sustained inactivity bouts during the day
(outside the sleep period duration). Calculated as
duration_sib_wakinghour divided by number_sib_wakinghours per day, after
which the mean and standard deviation are calculated across days.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="visualisation_sleep-pdf">visualisation_sleep.pdf<a class="anchor" aria-label="anchor" href="#visualisation_sleep-pdf"></a>
</h4>
<p>Visualisation to support data quality checks: -
visualisation_sleep.pdf (optional)</p>
<p>When input argument <code>do.visual</code> is set to TRUE GGIR can
show the following visual comparison between the time window of being
asleep (or in bed) according to the sleeplog and the detected sustained
inactivity bouts according to the accelerometer data. This visualisation
is stored in the results folder as
<code>visualisation_sleep.pdf</code>.</p>
<p>Explanation of the image: Each line represents one night. Colours are
used to distinguish definitions of sustained inactivity bouts (2
definitions in this case) and to indicate existence or absence of
overlap with the sleeplog. When argument <code>outliers.only</code> is
set to FALSE it will visualise all available nights in the dataset. If
<code>outliers.only</code> is set to TRUE it will visualise only nights
with a difference in onset or waking time between sleeplog and sustained
inactivity bouts larger than the value of argument
<code>criterror</code>.</p>
<p>This visualisation with outliers.only set to TRUE and critererror set
to 4 was very powerful to identify entry errors in sleeplog data in van
Hees et al PLoSONE 2015. We had over 25 thousand nights of data, and
this visualisation allowed us to quickly zoom in on the most problematic
nights to investigate possible mistakes in GGIR or mistakes in data
entry.</p>
<p><img src="../../../R%20pkgs/GGIR/articles/example_dovisual.jpg" width="700px"></p>
</div>
</div>
<div class="section level3">
<h3 class="tabset" id="output-part-5">Output part 5<a class="anchor" aria-label="anchor" href="#output-part-5"></a>
</h3>
<p>The output of part 5 is dependent on the parameter configuration, it
will generate as many output files as there are unique combination of
the three thresholds provided.</p>
<p>For example, the following files will be generated if the threshold
configuration was 30 for light activity, 100 for moderate and 400 for
vigorous activity:</p>
<ul>
<li>part5_daysummary_MM_L30M100V400_T5A5.csv</li>
<li>part5_daysummary_WW_L30M100V400_T5A5.csv</li>
<li>part5_personsummary_MM_L30M100V400_T5A5.csv</li>
<li>part5_personsummary_WW_L30M100V400_T5A5.csv</li>
<li>file summary reports/Report_nameofdatafile.pdf</li>
</ul>
<div class="section level4">
<h4 id="output5">Day level summary<a class="anchor" aria-label="anchor" href="#output5"></a>
</h4>
<table class="table">
<colgroup>
<col width="36%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>(Term in) variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>sleeponset</td>
<td>onset of sleep expressed in hours since the midnight in the night
preceding the night of interest, e.g. 26 is 2am.</td>
</tr>
<tr class="even">
<td>wakeup</td>
<td>waking up time express in the same way as sleeponset.</td>
</tr>
<tr class="odd">
<td>sleeponset_ts</td>
<td>onset of sleep expressed as a timestamp hours:minutes:seconds</td>
</tr>
<tr class="even">
<td>daysleeper</td>
<td>if 0 then the person woke up before noon, if 1 then the person woke
up after noon</td>
</tr>
<tr class="odd">
<td>cleaningcode</td>
<td>See paragraph <a href="#Cleaningcode">Cleaningcode</a>.</td>
</tr>
<tr class="even">
<td>dur_day_spt_min</td>
<td>Total length of daytime waking hours and spt combined (typically 24
hours for MM report).</td>
</tr>
<tr class="odd">
<td><code>dur_</code></td>
<td>duration of a behavioral class that will be specified int he rest of
the variable name</td>
</tr>
<tr class="even">
<td><code>ACC_</code></td>
<td>(average) acceleration according to default metric specific by
acc.metric</td>
</tr>
<tr class="odd">
<td><code>_spt_wake_</code></td>
<td>Wakefulness within the Sleep period time window.</td>
</tr>
<tr class="even">
<td><code>_spt_sleep_</code></td>
<td>Sleep within the Sleep period time window.</td>
</tr>
<tr class="odd">
<td><code>_IN_</code></td>
<td>Inactivity. Note that we use the term inactivity instead</td>
</tr>
</tbody>
</table>
<pre><code>    of sedentary behaviour for the lowest intensity level of behaviour. The reason
    for this is that GGIR does not attempt to classifying the activity type 
    sitting at the moment, by which we feel that using the term sedentary
    behaviour would fail to communicate that.|</code></pre>
<div class="line-block">
<code>_LIG_</code> | Light activity |<br><code>_MOD_</code> | Moderate activity |<br><code>_VIG_</code> | Vigorous activity |<br><code>_MVPA_</code> | Moderate or Vigorous activity |<br><code>_unbt_</code> | Unbouted |<br><code>_bts_</code> | Bouts (also known as sojourns), which are segments
that for which the acceleration is within a specified range for a
specified fraction of the time.|<br><code>_bts_1_10_</code>| Bouts lasting at least 1 minute and less than
10 minutes (1 and 9.99 minutes are included, but 10 minutes is not).
|<br>
Nblock | number of blocks of a certain behavioral class, not these are
not bouts but a count of the number of times the behavioral class occurs
without interruptions. |<br>
WW | in filename refers to analyses based on the timewindow from waking
to waking up |<br>
MM | in filename refers to analyses done on windows between midnight and
midnight |<br>
calendar_date | calendar date on which the window started in
day/month/year format. So, for WW window this could mean that you have
two windows starting on the same date. |<br>
weekday | weekday on which the window started. So, for WW window this
could mean that you have two windows starting on the weekday. |<br><code>_total_IN</code> | total time spent in inactivity (no distinction
between bouted or unbouted behavior, this is a simple count of the
number of epochs that meet the threshold criteria. |<br><code>_total_LIG</code>| total time spent in light activity.|<br>
nonwear_perc_day | Non-wear percentage during the waking hours of this
day. |<br>
nonwear_perc_spt | Non-wear percentage during the spt hours of this day.
|<br>
nonwear_perc_day_spt | Non-wear percentage during the whole day,
including waking and spt. |<br>
dur_day_min | Duration of waking hours within this day window|<br>
dur_spt_min | Duration of Sleep Period Time within this day window.
|<br>
dur_day_spt_min | Duration this day window, including both waking hours
and SPT. |<br>
sleep_efficiency | sleep_efficiency in part 5 is not the same as in part
4, but calculated as the percentage of sleep within the sleep period
time window. The conventional approach is the approach used in part 4.
|<br>
L5TIME | Timing of least active 5hrs, expressed as timestamp in the day
|<br>
M5TIME | Timing of most active 5hrs |<br>
L5TIME_num, M5TIME_num | Timing of least/most active 5hrs, expressed as
hours in the day. Note that L5/M5 timing variables are difficult to
average across days because 23:00 and 1:00 would average to noon and not
to midnight. So, caution is needed when interpreting person averages.
|<br>
L5VALUE | Acceleration value for least active 5hrs |<br>
M5VALUE | Acceleration value for most active 5hrs |<br><code>ig_</code> | All variables related to intensity gradient analysis
|<br><code>_gradient</code> | Gradient from intensity gradient analysis
proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> for the waking hours window (<code>_day_</code>) and for
the full window (<code>_day_spt_</code>) |<br><code>_intercept</code> | Intercept from intensity gradient analysis
proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> for the waking hours window (<code>_day_</code>) and for
the full window (<code>_day_spt_</code>) |<br><code>_rsquared</code> | r squared from intensity gradient analysis
proposed by <a href="https://journals.lww.com/acsm-msse/Fulltext/2018/06000/Beyond_Cut_%20Points__Accelerometer_Metrics_that.25.aspx" class="external-link">Rowlands
et al. 2018</a> for the waking hours window (<code>_day_</code>) and for
the full window (<code>_day_spt_</code>) |<br><code>FRAG_</code> | All variables related to behavioural fragmentation
analysis |<br><code>TP_</code> | Transition probability|<br>
PA2IN | Physical activity fragments followed by inactivity
fragments|<br>
IN2PA | Physical inactivity fragments followed by activity
fragments|<br>
Nfrag | Number of fragments |<br>
IN2LIPA | Inactivity fragments followed by LIPA |<br>
IN2MVPA | Inactivity fragments followed by MVPA |<br><code>mean_dur</code> | mean duration of a fragment category |<br><code>Gini_dur</code> | Gini index|<br><code>CoV_dur</code> | Coefficient of Variation |<br>
alpha | Power law exponent |<br><code>x0.5</code> | Derived from power law exponent alpha, see <a href="https://www.sciencedirect.com/science/article/abs/pii/S096663620900602X?via%3Dihub" class="external-link">Chastin
et al. 201 0</a> |<br><code>W0.5</code> | Derived from power law exponent alpha, see <a href="https://www.sciencedirect.com/science/article/abs/pii/S096663620900602X?via%3Dihub" class="external-link">Chastin
et al. 201 0</a> |<br>
nap_count | Total number of naps, only calculated when argument
do.sibreport = TRUE, currently optimised for 3.5-year olds. See function
documentation for function <code>g.part5.classifyNaps</code> in the <a href="https:/CRAN.R-project.org/package=GGIR/GGIR.pdf">GGIR function
documentation (pdf)</a>. |<br>
nap_totalduration | Total nap duration, only calculated when argument
do.sibreport = TRUE, currently optimised for 3.5-year old. See function
documentation for function <code>g.part5.classifyNaps</code> in the <a href="https:/CRAN.R-project.org/package=GGIR/GGIR.pdf">GGIR function
documentation (pdf)</a>. |<br>
sibreport_n_items | Only created if <code>do.sibreport = TRUE</code>.
Number of items in the sibreport |<br>
sibreport_n_items_day | Only created if
<code>do.sibreport = TRUE</code>. Number of items in the sibreport for
this specific day |<br>
nbouts_day_X | Only created if <code>do.sibreport = TRUE</code>. Number
of bouts in a day of X where X can be sib (sustained inactivity bout),
srnap (self-reported nap) or srnonw (self-reported nonwear) |<br>
noverl_X | Only created if <code>do.sibreport = TRUE</code>. Number of
overlapping bouts in a day of X where X can be sib_srnap, sib_srnonw,
srnap_sib, or srnonw_sib |<br>
frag_mean_dur_X_day | Only created if <code>do.sibreport = TRUE</code>.
Mean duration of X per day, where X can be sib, srnap or srnonw |<br>
dur_day_X_min | Only created if <code>do.sibreport = TRUE</code>. Total
duration in minutes of X per day, where X can be sib, srnap or srnonw
|<br>
mdur_X_overl_Y | Only created if <code>do.sibreport = TRUE</code>. Mean
duration of the overlap between X and Y, which are combinations of sib,
srnap or srnonw |<br>
tdur_X_overl_Y | Only created if <code>do.sibreport = TRUE</code>. Total
duration in minutes of the overlap between X and Y, which are
combinations of sib, srnap or srnonw |<br>
perc_X_overl_Y | Only created if <code>do.sibreport = TRUE</code>.
Percentage of overlap between X and Y, which are combinations of sib,
srnap or srnonw |</div>
<p><strong>Special note if you are working on compositional data
analysis:</strong></p>
<p>The duration of all <code>dur_</code> variables that have
<code>_total_</code> in their name should add up to the total length of
the waking hours in a day. Similarly, the duration of all other
<code>dur_</code> variables excluding the variables <code>_total_</code>
in their name and excluding the variable with <code>dur_day_min</code>,
<code>dur_spt_min</code>, and <code>dur_day_spt_min</code> should also
add up to the length of the full day.</p>
<p><strong>Motivation for default boutcriter.in = 0.9:</strong></p>
<p>The idea is that if you allow for bouts of 30 minutes it would not
make sense to allow for breaks of 20 percent (6 minutes!) this is why I
used a more stringent criteria for the highest category. Please note
that you can change these criteria via arguments
<code>boutcriter.mvpa</code>, <code>boutcriter.in</code>, and
<code>boutcriter.lig</code>.</p>
</div>
<div class="section level4">
<h4 id="person-level-summary-1">Person level summary<a class="anchor" aria-label="anchor" href="#person-level-summary-1"></a>
</h4>
<p>Most variables in the person level summary are derived from the day
level summary, but extended with <code>_pla</code> to indicate that the
variable was calculated as the plain average across all valid days.
Variables extended with <code>_wei</code> represent the weighted average
of across all days where weekend days always weighted 2/5 relative to
the contribution of week days.</p>
<table class="table">
<colgroup>
<col width="36%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>Variable name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Nvaliddays</td>
<td>Total number of valid days.</td>
</tr>
<tr class="even">
<td>Nvaliddays_WD</td>
<td>Number of valid week days.</td>
</tr>
<tr class="odd">
<td>Nvaliddays_WE</td>
<td>Number of valid weekend days, where the days that start on Saturday
or Sunday are considered weekend.</td>
</tr>
<tr class="even">
<td>NcleaningcodeX</td>
<td>Number of days that had cleaning code X for the corresponding sleep
analysis in part 4. In case of MM analysis this refers to the night at
the end of the day.</td>
</tr>
<tr class="odd">
<td>Nvaliddays_AL10F_WD</td>
<td>Number of valid week days with at least 10 fragments (5 inactivity
or 5 inactive)</td>
</tr>
<tr class="even">
<td>Nvaliddays_AL10F_WE</td>
<td>Number of valid weekend days with at least 10 fragments (5
inactivity or 5 inactive)</td>
</tr>
<tr class="odd">
<td><code>_wei</code></td>
<td>weighted average of weekend and week days, using a 2/5 ratio, see
above.</td>
</tr>
<tr class="even">
<td><code>_pla</code></td>
<td>plain average of all days, see above</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="motivation-and-clarification">Motivation and clarification<a class="anchor" aria-label="anchor" href="#motivation-and-clarification"></a>
</h2>
<p>In this chapter we will try to collect motivations and clarification
behind GGIR which may not have been clear from the existing
publications.</p>
<div class="section level3">
<h3 id="reproducibilty-of-ggir-analyses">Reproducibilty of GGIR analyses<a class="anchor" aria-label="anchor" href="#reproducibilty-of-ggir-analyses"></a>
</h3>
<p>Some tips to increase reproducibility of your findings:</p>
<ol style="list-style-type: decimal">
<li>When you publish your findings, please remember to add the GGIR
package version number. All of GGIR are archived by CRAN and available
from the archive section on the package <a href="https://CRAN.R-project.org/package=GGIR" class="external-link">website</a>. GGIR has
evolved over the years. To get a better understanding of how versions
differ you should check the NEWS sections from the package <a href="https://CRAN.R-project.org/package=GGIR" class="external-link">website</a>
</li>
<li>Report how you configured the accelerometer</li>
<li>Report the study protocol and wear instructions given to the
participants</li>
<li>Report GGIR version</li>
<li>Report how GGIR was used: Share the config.csv file or your R
script</li>
<li>Report how you post-processed / cleaned GGIR output</li>
<li>Report how reported outcomes relate to the specific variable names
in GGIR</li>
</ol>
</div>
<div class="section level3">
<h3 id="auto-calibration">Auto-calibration<a class="anchor" aria-label="anchor" href="#auto-calibration"></a>
</h3>
<p>An acceleration sensor works on the principle that acceleration is
captured mechanically and converted into an electrical signal. The
relationship between the electrical signal and the acceleration is
usually assumed to be linear, involving an offset and a gain factor. We
shall refer to the establishment of the offset and gain factor as the
sensor calibration procedure. Accelerometers are usually calibrated as
part of the manufacturing process under non-movement conditions using
the local gravitational acceleration as a reference. The manufacturer
calibration can later be evaluated by holding each sensor axis parallel
(up and down) or perpendicular to the direction of gravity; readings for
each axis should be ±1 and 0 g, respectively. However, this procedure
can be cumbersome in studies with a high throughput. Furthermore, such a
calibration check will not be possible for data that have been collected
in the past and for which the corresponding accelerometer device does
not exist anymore. Techniques have been proposed that can check and
correct for calibration error based on the collected triaxial
accelerometer data in the participant’s daily life without additional
experiments, referred to as autocalibration. The general principle of
these techniques is that a recording of acceleration is screened for
nonmovement periods. Next, the moving average over the nonmovement
periods is taken from each of the three orthogonal sensor axes and used
to generate a three-dimensional ellipsoid representation that should
ideally be a sphere with radius 1 g. Here, deviations between the radius
of the three-dimensional ellipsoid and 1 g (ideal calibration) can then
be used to derive correction factors for sensor axis-specific
calibration error. This auto-calibration performed by GGIR uses this
technique and a more detailed description and demonstration can be found
in the published paper.</p>
<p>Reference:</p>
<ul>
<li>van Hees VT, Fang Z, Langford J, Assah F, Mohammad A, da Silva IC,
Trenell MI, White T, Wareham NJ, Brage S. Autocalibration of
accelerometer data for free-living physical activity assessment using
local gravity and temperature: an evaluation on four continents. J Appl
Physiol (1985). 2014 Oct 1;117(7):738-44. PMID: 25103964 <a href="https://doi.org/10.1152/japplphysiol.00421.2014" class="external-link">link</a>
</li>
</ul>
<p>Key decisions to be made:</p>
<ol style="list-style-type: decimal">
<li>Whether to apply auto-calibration or not (default and recommended
setting is YES). You can turn this off by setting argument
<code>do.call</code> in <code>GGIR</code> to
<code>do.call=FALSE</code>.</li>
<li>Other variables are probably best left in their default setting</li>
</ol>
<p>Key output variables:</p>
<ol style="list-style-type: decimal">
<li>Variable value <code>cal.error.end</code> as stored in
data_quality_report.csv or variable value calib_err in summary.csv.
These should be less than 0.01 g (10mg).</li>
</ol>
</div>
<div class="section level3">
<h3 id="non-wear-detection">Non-wear detection<a class="anchor" aria-label="anchor" href="#non-wear-detection"></a>
</h3>
<p>Accelerometer non-wear time is detected on the basis of statistics
derived from a rolling time window. A step in time is classified as
non-wear if both of the following criteria are met for at least two out
of the three accelerometer axes:</p>
<ul>
<li>The standard deviation of the accelerations is less than
accelerometer brand specific reference values, which for most brands is
13.0 m<em>g</em> (<span class="math inline">\(1 mg = 0.00981
m·s^−2\)</span>)</li>
<li>The range of accelerations (i.e., maximum value <em>minus</em>
minimum value) is less than 50 m<em>g</em>.</li>
</ul>
<p>The size of the rolling time window and the size of the steps it
takes in time are defined by argument <code>windowsizes</code>, a vector
with length three. More specifically, the second value (mediumsize
window, default = 15 min) and the third value (longsize window, default
= 60 min) are used.</p>
<p>How it then labels the data depends on the non-wear approach taken as
discussed below, and specified with argument
<code>nonwear_approach</code>. At the moment there are two approaches to
detect non-wear: <code>nonwear_approach = "2013"</code> and
<code>nonwear_approach = "2023"</code>.</p>
<div class="section level4">
<h4 id="approaches-to-detect-non-wear-2013-and-2023-algorithms">Approaches to detect non-wear: 2013 and 2023 algorithms<a class="anchor" aria-label="anchor" href="#approaches-to-detect-non-wear-2013-and-2023-algorithms"></a>
</h4>
<p><strong>nonwear_approach = “2013”</strong></p>
<p>The 2013 approach is a revision of the approach first described in
the <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0022922" class="external-link">2011
PLoSONE publication</a>. It uses the criteria derived from the longsize
window centered around each mediumsize window (default = 15 minutes) to
classify each mediumsize window at its centre.</p>
<p>The modification of the algorithm in 2013 relative to 2011
included:</p>
<ul>
<li>The longsize window changed from 30 minutes to 60 minutes to
decrease the chance of accidentally detecting short sedentary periods as
non-wear time.</li>
<li>The rolling window went from non-overlapping to overlapping (15
minute steps of a 60 minute window results in a longsize window overlap
between step of 22.5 minutes) to improve the time resolution.</li>
</ul>
<p><strong>nonwear_approach = “2023”</strong></p>
<p>The 2023 version of the algorithm uses the criteria applied to the
longsize window to assign a nonwear score to the entire longsize window
(default = 60 minutes) being tested. Instead of centering the longsize
window in the middle of the mediumsize window, the 2023 method aligns
the longsizewindow with its left edge to the left edge of the mediumsize
window. As a result, each point in time is classified multiple times
given that multiple steps of the rolling window classification will
overlap with it. If the nonwear criteria are met for any of these
windows that overlap with a point in time, it will be labelled as
nonwear.</p>
</div>
<div class="section level4">
<h4 id="additional-non-wear">Additional non-wear<a class="anchor" aria-label="anchor" href="#additional-non-wear"></a>
</h4>
<p>Inspection of unpublished data on non-wear classification by the
algorithm as described in our published work indicated that the
algorithm does not cope well with periods of monitor transportation per
post. Here, long periods of non-wear are briefly interrupted by periods
of movement, which are normally interpreted as monitor wear. Therefore,
the algorithm was expanded with an additional stage in which the
plausibility of “wear-periods” in-between non-wear periods is tested.
Short periods of detected wear-time in-between longer periods of
detected non-wear were classified as non-wear time based on the duration
and the proportion of the duration relative to the bordering periods of
detected non-wear-periods. The following criteria were derived from
visual observation of various datasets using knowledge about study
protocols. All detected wear-periods of less than six hours and less
than 30% of the combined duration of their bordering non-wear periods
were classified as non-wear. Additionally, all wear-periods of less than
three hours and which formed less than 80% of their bordering non-wear
periods were classified as non-wear. The motivation for selecting a
relatively high criteria (&lt; 30%) in combination with a long period
(6hrs) and a low criteria (&lt; 80%) in combination with a short period
(3 hrs) was that long period are more likely to be actually related to
monitor wear time. A visual model was created, see picture below. Here,
units of time are presented in squares and marked grey if detected as
non-wear time. Period C is detected as wear-time and borders to non-wear
periods B and D. If the length of C is less than six hours and C divided
by the sum of B and D is less than 0.3 then the first criteria is met
and block C is turned into a non-wear period.</p>
<p><img src="../../../R%20pkgs/GGIR/articles/nonwearimage.jpg" width="400px"></p>
</div>
<div class="section level4">
<h4 id="beginning-and-ending-of-the-recording">Beginning and ending of the recording<a class="anchor" aria-label="anchor" href="#beginning-and-ending-of-the-recording"></a>
</h4>
<p>By visual inspection of &gt;100 traces from a large observational
study it turned out that applying this stage in three iterative stages
allowed for improved classification of periods characterised by
intermittent periods of non-wear and apparent wear. Further, an
additional rule was introduced for the final 24 hours of each
measurement. The final 24 hours are often considered the period in which
the accelerometer is potentially taken off but moved because of
transportation, e.g. by the mail service. All wear-periods in the final
24 hrs of each measurement shorter than three hours and preceded by at
least one hour of non-wear time were classified as non-wear.</p>
<p>Finally, if the measurement starts or ends with a period of less than
three hours of wear followed by non-wear (any length) then this period
of wear is classified as non-wear. These additional criteria for
screening the beginning and end of the accelerometer file reflect the
likelihood of movements that are involved when starting the
accelerometer or downloading the data from the accelerometer. This final
check can be turned off with argument
<code>nonWearEdgeCorrection</code>.</p>
<p>Reference:</p>
<ul>
<li>van Hees VT, Gorzelniak L, Dean León EC, Eder M, Pias M, Taherian S,
Ekelund U, Renström F, Franks PW, Horsch A, Brage S. Separating movement
and gravity components in an acceleration signal and implications for
the assessment of human daily physical activity. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0061691" class="external-link">PLoS
One. 2013 Apr 23</a>.</li>
</ul>
<p>Key decisions to be made:</p>
<ol style="list-style-type: decimal">
<li>Size of windows</li>
<li>Whether to utilize the non-wear detection</li>
<li>Non-wear approach (either 2013 or 2023)</li>
</ol>
<p>Key output variables:</p>
<ol style="list-style-type: decimal">
<li>Raw classification</li>
<li>Non-wear duration</li>
<li>Non-wear duration taking into account the protocol</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="clipping-score">Clipping score<a class="anchor" aria-label="anchor" href="#clipping-score"></a>
</h3>
<p>GGIR also screens the acceleration signal for “clipping”. If more
than 50% of the data points in a mediumsize window (default = 15
minutes) are close to the maximal dynamic range of this sensor the
corresponding time period is considered as potentially corrupt data,
which may be explained by the sensor getting stuck at its extreme value.
For example, for a dynamic range of 8<em>g</em>, accelerations over
7.5<em>g</em> would be marked as “clipping”.</p>
<p>Reference:</p>
<ul>
<li>van Hees VT, Gorzelniak L, Dean León EC, Eder M, Pias M, Taherian S,
Ekelund U, Renström F, Franks PW, Horsch A, Brage S. Separating movement
and gravity components in an acceleration signal and implications for
the assessment of human daily physical activity. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0061691" class="external-link">PLoS
One. 2013 Apr 23</a>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="why-collapse-information-to-epoch-level">Why collapse information to epoch level?<a class="anchor" aria-label="anchor" href="#why-collapse-information-to-epoch-level"></a>
</h3>
<p>Although many data points are collected we decide to only work with
aggregated values (e.g. 1 or 5 second epochs) for the following
reasons:</p>
<ol style="list-style-type: decimal">
<li><p>Accelerometers are often used to describe patterns in metabolic
energy expenditure. Metabolic energy expenditure is typically defined
per breath or per minute (indirect calorimetry), per day (room
calorimeter), or per multiple days (doubly labelled water method). In
order to validate our methods against these reference standards we need
to work with a similar time resolution.</p></li>
<li><p>Collapsing the data to epoch summary measures helps to
standardise for differences in sample frequency between
studies.</p></li>
<li><p>There is little evidence that the raw data is an accurate
representation of body acceleration. All scientific evidence on the
validity of accelerometer data has so far been based on epoch
averages.</p></li>
<li><p>Collapsing the data to epoch summary measures may help to average
out different noise levels and make sensor brands more
comparable.</p></li>
</ol>
<div class="section level4">
<h4 id="why-does-the-first-epoch-not-allign-with-the-original-start-of-the-recording">Why does the first epoch not allign with the original start of the
recording<a class="anchor" aria-label="anchor" href="#why-does-the-first-epoch-not-allign-with-the-original-start-of-the-recording"></a>
</h4>
<p>GGIR uses short (default 5 seconds) and long epochs (default 15
minutes). The epochs are aligned to the hour in the day, and to each
other. For example, if a recording starts at 9:52:00 then the GGIR will
work with epochs derived from 10:00:00 onward. If the recording starts
at 10:12 then GGIR will work with epochs derived from 10:15:00
onward.</p>
<p>Motivation:</p>
<ul>
<li>This allows us to have a standardised time grid across recordings to
describe behaviour.</li>
<li>This allows us to calculate behaviour exactly per day or per
specified time interval in a day.</li>
</ul>
<p>If the first 15 minute epochs would start at 9:52 then the next one
would start at 10:07, which makes it impossible to make statement about
behaviour between 10:00 and 13:00.</p>
</div>
</div>
<div class="section level3">
<h3 id="Sleep_analysis">Sleep analysis<a class="anchor" aria-label="anchor" href="#Sleep_analysis"></a>
</h3>
<p>In GGIR sleep analysis has been implemented in part 3 and 4. Sleep
analysis comes at two levels: The identification of the main Sleep
Period Time (SPT) window or the time in bed window (TIB), and the
discrimination of sleep and wakefulness periods. The term sleep is
somewhat controversial in the context of accelerometry, because
accelerometer only capture lack of movement. To acknowledge this
challenge GGIR refers to these classified sleep periods as
<strong>sustained inactivity bouts (abbreviated as SIB)</strong>.</p>
<p>Current, GGIR offers the user the choice to identify SIB period using
any of the following algorithms:</p>
<ul>
<li>
<strong>vanHees2015:</strong> Heuristic algorithm proposed in 2015
<a href="https://doi.org/10.1371/journal.pone.0142533" class="external-link">link</a> which
looks for periods of time where the z-angle does not change by more than
5 degrees for at least 5 minutes. This in contrast to conventional sleep
detection algorithms such as Sadeh, Galland, and ColeKripke which rely
on acceleration to estimate sleep. The vanHees2015 algorithm is the
default.</li>
<li>
<strong>Sadeh1994:</strong> The algorithm proposed by Sadeh et al.
<a href="https://doi.org/10.1093/sleep/17.3.201" class="external-link">link</a>. To use the
GGIR implementation of the zero-crossing counts and Sadeh algorithm,
specify argument <code>HASIB.algo = "Sadeh1994"</code> and argument
<code>Sadeh_axis = "Y"</code> to indicate that the algorithm should use
the Y-axis of the sensor.</li>
<li>
<strong>Galland2012:</strong> The count-scaled algorithm proposed by
Galland et al. <a href="http://dx.doi.org/10.1016/j.sleep.2012.01.018" class="external-link">link</a>. To use
our implementation of the Galland2012 algorithm specify argument
<code>HASIB.algo = "Galland2012"</code>. Further, set
<code>Sadeh_axis = "Y"</code> to specify that the algorithm should use
the Y-axis.</li>
<li>
<strong>ColeKripke1992:</strong> The algorithm proposed by Cole et
al. <a href="https://doi.org/10.1093/sleep/15.5.461" class="external-link">link</a>, more
specifically GGIR uses the algortihm proposed in the paper for 10-second
non-overlapping epochs with counts e xpressed average per minute. We
skip the re-scoring steps as the paper showed marginal added value of
this added complexity. To use the GGIR implementation of the
zero-crossing counts and Sadeh algorithm, specify argument
<code>HASIB.algo = "ColeKripke1992"</code> and argument
<code>Sadeh_axis = "Y"</code> to indicate that the algorithm should use
the Y-axis of the sensor.</li>
<li>
<strong>NotWorn:</strong> This algorithm can be used if the study
protocol was to not wear the accelerometer at night. GGIR will then look
for hours with close to zero movement and treat those as sustained
inactivity bouts. It should be obvious that this does not facilitate any
meaningful sleep analysis but it does allow GGIR to then run GGIR part 5
based on the assumption that this analysis helped to isolate night time
from daytime.</li>
</ul>
<div class="section level4">
<h4 id="notes-on-sleep-classification-algorithms-designed-for-count-data">Notes on sleep classification algorithms designed for count
data<a class="anchor" aria-label="anchor" href="#notes-on-sleep-classification-algorithms-designed-for-count-data"></a>
</h4>
<div class="section level5">
<h5 id="replication-of-the-movement-counts-needed">Replication of the movement counts needed<a class="anchor" aria-label="anchor" href="#replication-of-the-movement-counts-needed"></a>
</h5>
<p>The implementation of the zero-crossing count in GGIR is not an exact
copy of the original approach as used in the AMA-32 Motionlogger
Actigraph by Ambulatory-monitoring Inc. (“AMI”) that was used in the
studies by Sadeh, Cole, Kripke and colleagues in late 1980s and 1990s.
No complete publicly accessible description of that approach exists.
From personal correspondence with AMI, we learnt that the technique has
been kept proprietary and has never been shared with or sold to other
actigraphy manufacturers (time of correspondence October 2021).
Therefore, if you would like to replicate the exact zero-crossing counts
calculation used by Sadeh and colleague’s consider using AMI’s actigraph
device (you will have to trust AMI that hardware has not changed since
the 1980s). However, if you prioritise openness over methodological
consistency with the original studies by Sadeh, Cole, and colleagues
then you may want to consider any of the open source techniques in this
library.</p>
</div>
<div class="section level5">
<h5 id="missing-information-for-replicating-movement-counts">Missing information for replicating movement counts<a class="anchor" aria-label="anchor" href="#missing-information-for-replicating-movement-counts"></a>
</h5>
<p>More specifically, the missing information about the calculation
includes: (1) Sadeh specified that calculations were done on data from
the Y-axis but the direction of the Y-axis was not clarified. Therefore,
it is unclear whether the Y-axis at the time corresponds to the Y-axis
of modern sensors, (2) Properties of the frequency filter are missing
like the filter order and more generally it is unclear how to simulate
original acceleration sensor behaviour with modern sensor data, and (3)
Sensitivity of the sensor, we are now guessing that the Motionlogger had
a sensitivity of 0.01 <em>g</em> but without direct proof.</p>
<p>The method proposed by Galland and colleagues in 2012 was designed
for counts captured with the Actical device (Mini Mitter Co, Inc Bend
OR). Based on the correspondence with AMI we can conclude that Actical
counts are not identical to AMI’s actigraph counts. Further, a publicly
accessible complete description of the Actical calculation does not
exist. Therefore, we can also conclude that methodological consistency
cannot be guaranteed for Actical counts.</p>
</div>
<div class="section level5">
<h5 id="an-educated-guess-and-how-you-can-to-help-optimise-the-implementation">An educated guess and how you can to help optimise the
implementation<a class="anchor" aria-label="anchor" href="#an-educated-guess-and-how-you-can-to-help-optimise-the-implementation"></a>
</h5>
<p>Following the above challenges the implementation of the
zero-crossing count in GGIR is based on an educated guess where we used
all information we could find in literature and product documentation.
In our own evaluation the zero-crossing count value range looks
plausible when compared to the value range in the original
publications.</p>
<p><strong>How you can help to optimise the implementation:</strong></p>
<p>Given the uncertainties surrounding the older sleep algorithm we
encourage GGIR users to evaluate and help optimise the algorithms. Here,
we have the following suggestions:</p>
<ul>
<li>For ActiGraph users, when comparing GGIR Cole-Kripke estimates with
ActiLife Cole Kripke estimate be aware that ActiLife may have adopted a
different Cole-Kripke algorithm as the original publication presented
four algorithms. Further, ActiLife may have used different educated
guesses about how Motionlogger counts are calculated.</li>
<li>Compare GGIR sleep estimate with Polysomnography or Motionlogger
output and try to optimise the zero crossing count parameters as
discussed below.</li>
</ul>
<p><strong>Input argument to aid in the optimisation:</strong></p>
<p>To aid research in exploring count type algorithms, we also
implemented the <code>brondcounts</code> as proposed by Brønd and
Brondeel and available via R package activityCounts, as well as the
<code>neishabouricounts</code> that follows the algorithm implemented in
the close-source software ActiLife by ActiGraph and is available in the
R package actilifecounts. DISCLAIMER: the brondcounts option has been
deprecated as of October2022 due to issues with the activityCounts
package it relies on. We will reactivate brondcounts once the issues are
resolved. To extract these metrics in addition to the zero crossing
count, specify <code>do.brondcounts = TRUE</code> and/or
<code>do.neishabouricounts = TRUE</code> which is used in GGIR part 1
and uses R packages activityCounts and actilifecounts in the background.
As a result, sleep estimates for Sadeh, Cole-Kripke or Galland will be
derived based on the zero crossing algorithm and additionally on the
<code>brondcounts</code> or/and <code>actilifecounts</code> algorithms
if requested by the user. Further, we have added parameters to help
modify the configuration of the zero-crossing count calculation, see
arguments: <code>zc.lb</code>, <code>zc.hb</code>, <code>zc.sb</code>,
<code>zc/order</code>, and <code>zc.scale</code>. As well as one
parameter to modify the neishabouricounts calculation, see argument:
<code>actilife_LFE</code>.</p>
</div>
</div>
<div class="section level4">
<h4 id="guiders">Guiders<a class="anchor" aria-label="anchor" href="#guiders"></a>
</h4>
<p>SIBs (explained above) can occur anytime in the day. In order to
differentiate SIBs that correspond to daytime rest/naps from SIBs that
correspond to the main Sleep Period Time window (abbreviated as SPT), a
guiding method referred as <strong>guider</strong> is used. All SIBs
that overlap with the window defined by guider are considered as sleep
within the SPT window. The start of the first SIB identified as sleep
period and the end of the last SIB identified as sleep period define the
beginning and the end of the SPT window. In this way the classification
relies on the accelerometer for detecting the timing of sleep onset and
waking up time, but the guider tells it in what part of the day it
should look, as SPT window will be defined only if SIB is detected
during the guider specified window.</p>
<p>If a guider reflects the Time in Bed the interpretation of the Sleep
Period Time, Sleep onset time and Wakeup time remains unchanged.
However, we can then also assess sleep latency and and sleep efficiency,
which will be included in the report.</p>
<p>The guiding method as introduced above can be one of the following
methods:</p>
<ul>
<li>
<strong>Guider = sleep log</strong>: As presented in <a href="https://doi.org/10.1371/journal.pone.0142533" class="external-link">before mentioned
2015 article</a>.See section <a href="#key-arguments-related-to-sleep-analysis">on sleep analysis
related arguments</a> for a discussion fo sleep log data formats.
Specify argument <code>sleepwindowType</code> to clarify whether the
sleeplog capture “TimeInBed” or “SPT”. If it is set to “TimeInBed”, GGIR
will automatically expand its part 4 analyses with sleep latency and
sleep efficiency assessment.</li>
<li>
<strong>Guider = HDCZA</strong>: As presented in <a href="https://dx.doi.org/10.1038/s41598-018-31266-z" class="external-link">our 2018
article</a>. The HDCZA algorithm does not require access to a sleep log,
and is designed for studies where no sleep log is available. The time
segment over which the HDCZA is derived are by default from noon to
noon. However, if the HDCZA ends between 11am and noon then it will be
applied again but to a 6pm-6pm window.</li>
<li>
<strong>Guider = L5+/-12</strong>: As presented in <a href="https://dx.doi.org/10.1038/s41598-018-31266-z" class="external-link">our 2018
article</a>. Twelve hour window centred around the least active 5 hours
of the day.</li>
<li>
<strong>Guider = setwindow</strong>: Window times are specified by
user, constant at specific clock times with argument
<code>def.noc.sleep</code>.</li>
<li>
<strong>Guider = HorAngle</strong>: Only used if argument
<code>sensor.location="hip"</code>, because this will trigger the
identification of the longitudinal axis based on 24-hour lagged
correlation. You can also force GGIR to use a specific axis as
longitudinal axis with argument <code>longitudinal_axis</code>. Next, it
identifies when the horizontal axis is between -45 and 45 degrees and
considers this a horizontal posture. Next, this is used to identify the
largest time in bed period, by only considering horizontal time segments
of at least 30 minutes, and then looking for longest horizontal period
in the day where gaps of less than 60 minutes are ignored. Therefore, it
is partially similar to the HDCZA algorithm. When “HorAngle” is used,
<code>sleepwindowType</code> is automatically set to “TimeInBed”.</li>
<li>
<strong>Guider = NotWorn</strong>: Used for studies where the
instruction was not to wear the accelerometer durating the night. GGIR
then searches for the longest period with zero movement.</li>
</ul>
<p>For all guiders other than “HorAngle” and “sleep log” argument
<code>sleepwindowType</code> is automatically switched to “SPT”, such
that no attempt is made to estimate sleep latency or sleep
efficiency.</p>
<p>GGIR uses by default the sleep log, if the sleep log is not available
it falls back on the HDCZA algorithm (or HorAngle if
<code>sensor.location="hip"</code>). If HDCZA is not successful GGIR
will falls back on the L5+/-12 definition, and if this is not available
it will use the setwindow. The user can specify the priority with
argument <code>def.noc.sleep</code>. So, when we refer to guider then we
refer to one of these five methods.</p>
</div>
<div class="section level4">
<h4 id="daysleepers-nights-workers">Daysleepers (nights workers)<a class="anchor" aria-label="anchor" href="#daysleepers-nights-workers"></a>
</h4>
<p>If the guider indicates that the person woke up after noon, the sleep
analysis in part 4 is performed again on a window from 6pm-6pm. In this
way our method is sensitive to people who have their main sleep period
starting before noon and ending after noon, referred as daysleeper=1 in
daysummary.csv file, which you can interpret as night workers. Note that
the L5+/-12 algorithm is not configured to identify daysleepers, it will
only consider the noon-noon time window.</p>
</div>
<div class="section level4">
<h4 id="Cleaningcode">Cleaningcode<a class="anchor" aria-label="anchor" href="#Cleaningcode"></a>
</h4>
<p>To monitor possible problems with the sleep assessment, the variable
<strong>cleaningcode</strong> is recorded for each night. Cleaningcode
per night (noon-noon or 6pm-6pm as described above) can have one of the
following values:</p>
<ul>
<li>0: no problem, sleep log available and SPT is identified;</li>
<li>1: sleep log not available, thus HDCZA is used and SPT is
identified,</li>
<li>2: not enough valid accelerometer data based on the non-wear and
clipping detection from part summarised over the present night where the
argument <code>includenightcrit</code> indicates the minimum number of
hours of valid data needed within those 24 hours.</li>
<li>3: no accelerometer data available,</li>
<li>4: there were no nights to be analysed for this person,</li>
<li>5: SPT estimated based on guider only, because either no SIB was
found during the entire guider window, which complicates defining the
start and end of the SPT, or the user specified the ID number of the
recording and the night number in the <a href="#Data_cleaning_file">data_cleaning_file</a> to tell GGIR to rely
on the guider and not rely on the accelerometer data for this particular
night</li>
<li>6: no sleep log available and HDCZA also failed for this specific
night then use average of HDCZA estimates from other nights in the
recording as guider for this night. If HDCZA estimates are not available
during the entire recording then use L5+/-12 estimate for this night.
The last scenario seems highly unlikely in a recording where the
accelerometer was worn for at least one day.</li>
</ul>
</div>
<div class="section level4">
<h4 id="difference-between-cleaned-and-full-output">Difference between cleaned and full output<a class="anchor" aria-label="anchor" href="#difference-between-cleaned-and-full-output"></a>
</h4>
<p>All the information for each night is stored in the
<code>results/QC</code> folder allowing tracing of the data analysis and
night selection. The cleaned results stored in the results folder. In
part 4 a night is excluded from the ‘cleaned’ results based on the
following criteria:</p>
<ul>
<li>If the study proposed a sleep log to the individuals, then nights
are excluded for which the sleep log was not used as a guider (i.o.w.
nights with cleaningcode not equal to 0 or variable sleep log used
equals FALSE).</li>
<li>If the study did not propose a sleep log to the individuals, then
all nights are removed with cleaningcode higher than 1.</li>
</ul>
<p>Be aware that if using the full output and working with wrist
accelerometer data, then missing entries in a sleep log that asks for
Time in Bed will be replaced by HDCZA estimates of SPT. Therefore, extra
caution should be taken when working with the full output.</p>
<p>Notice that part 4 is focused on sleep research, by which the cleaned
reported is the way it is. In the next section we will discuss the
analysis done by part 5. There, the choice of guider may be considered
less important, by which we use different criteria for including nights.
So, you may see that a night that is excluded from the cleaned results
in part 4 still appears in the cleaned results for part 5.</p>
</div>
<div class="section level4">
<h4 id="Data_cleaning_file">Data cleaning file<a class="anchor" aria-label="anchor" href="#Data_cleaning_file"></a>
</h4>
<p>The package allows some adjustments to be made after data quality
check. The <code>data_cleaning_file</code> argument allows you to
specify individuals and nights for whom part4 should entirely rely on
the guider (for example if we decide to use sleep log only information).
The first column of this file should have header <code>ID</code> and
there should be a column <code>relyonguider_part4</code> to specify the
night. The <code>data_cleaning_file</code> allows you to tell GGIR which
person(s) and night(s) should be omitted in part 4. The the night
numbers to be excluded should be listed in a column
<code>night_part4</code> as header.</p>
</div>
</div>
<div class="section level3">
<h3 id="Waking-waking_or_24_hour">Waking-waking or 24 hour time-use analysis<a class="anchor" aria-label="anchor" href="#Waking-waking_or_24_hour"></a>
</h3>
<p>In part 5 the sleep estimates from part 4 are used to describe
24-hour time use. Part 5 allows you to do this in two ways: Literally 24
hours which start and end a calendar day (default midnight, but
modifiable with argument <code>dayborder</code>) or from waking up to
waking up. In GGIR we refer to the former as <strong>MM</strong> windows
and to the latter as <strong>WW</strong> windows. The onset and waking
times are guided by the estimates from part 4, but if they are missing
part 5 will attempt to retrieve the estimate from the guider method,
because even if the accelerometer was not worn during the night, or a
sleep log is missing in a study where sleep log was proposed to the
participants, estimates from a sleep log or HDCZA can still be
considered a reasonable estimate of the SPT window in the context of
24-hour time use analysis.</p>
<p>If WW is used in combination with ignoring the first and last
midnight, argument <code>excludefirstlast</code>, then the first wake-up
time (on the second recording day) needs to be extracted for the first
WW day. This is done with the guider method. This also means that the
last WW window ends on the before last morning of the recording.</p>
<p>A distinction is made between the full results stored in the
<code>results/QC</code> folder and the cleaned results stored in the
results folder.</p>
<div class="section level4">
<h4 id="time-series-output-files">Time series output files<a class="anchor" aria-label="anchor" href="#time-series-output-files"></a>
</h4>
<p>If you want to inspect the time series corresponding to these windows
then see argument <code>save_ms5rawlevels</code>, which allows you to
export the time series including behavioral classes and non-wear
information to csv files. The behavioral classes are included as
numbers, the legend for these classes is stored as a separate legend
file in the meta/ms5.outraw folder named “behavioralcodes2020-04-26.csv”
where the date will correspond to the date of analysis.</p>
<p><strong>Additional input arguments that may be of
interest:</strong></p>
<ul>
<li>
<code>save_ms5raw_format</code> is a character string to specify how
data should be stored: either “csv” (default) or “RData”. Only used if
save_ms5rawlevels=TRUE.</li>
<li>
<code>save_ms5raw_without_invalid</code> is Boolean to indicate
whether to remove invalid days from the time series output files. Only
used if save_ms5rawlevels=TRUE.</li>
</ul>
<p><strong>The time series output file comes with the following
columns:</strong></p>
<table class="table">
<colgroup>
<col width="33%">
<col width="66%">
</colgroup>
<thead><tr class="header">
<th>Column name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>SleepPeriodTime</td>
<td>Is 1 if SPT is detected, 0 if not. Note that this refers to the
combined usage of guider and detected sustained inactivity bouts (rest
periods).</td>
</tr>
<tr class="even">
<td>invalidepoch</td>
<td>Is 1 if epoch was detect as invalid (e.g. non-wear), 0 if not.</td>
</tr>
<tr class="odd">
<td>guider</td>
<td>Is 1 if guider method detect epoch as SPT (e.g. sleeplog, HDCZA), 0
if not. You will not find here which guider is used, for this see other
GGIR output.</td>
</tr>
<tr class="even">
<td>window</td>
<td>Numeric indicator of the analysis window in the recording. If
timewindow = “MM” then these correspond to calendar days, if timewindow
= “WW” then these correspond to which wakingup-wakingup window in the
recording. So, in a recording of one week you may find window numbers 1,
2, 3, 4, 5 and 6.</td>
</tr>
<tr class="odd">
<td>class_id</td>
<td>The behavioural class codes are documented in the exported csv file
meta/ms5outraw/behaviouralcodes.csv. Class codes above class 8 will be
analysis specific, because it depends on the number time variants of the
bouts used. For example, if you look at MVPA lasting 1-10, 10-20, 30-40
then all of them will have their own class_id.</td>
</tr>
<tr class="even">
<td>invalid_fullwindow</td>
<td>Fraction of the window (see above) that represents invalid data. I
added this to make it easier to filter the timeseries based on whether
days are valid or not.</td>
</tr>
<tr class="odd">
<td>invalid_sleepperiod</td>
<td>Fraction of SPT within the current window that represents invalid
data.</td>
</tr>
<tr class="even">
<td>invalid_wakinghours</td>
<td>Fraction of SPT within the current window that represents invalid
data.</td>
</tr>
</tbody>
</table>
<p>To familiarize yourself with how the variables it can be helpful to
plot them yourself.</p>
<p>For users we also want to export the time serie sof multiple metric
values see argument <code>epochvalues2csv</code> which relates to the
storage of time series in GGIR part 2.</p>
</div>
<div class="section level4">
<h4 id="day-inclusion-criteria">Day inclusion criteria<a class="anchor" aria-label="anchor" href="#day-inclusion-criteria"></a>
</h4>
<p>The full part 5 output is stored in the <code>results/QC</code>
folder. The default inclusion criteria for days in the cleaned output
from part 5 (stored in the <code>results</code> folder) are:</p>
<ul>
<li>For both MM and WW defined days: The valid (sensor worn) time
fraction of the day needs to be above the fraction specified with
argument <code>includedaycrit.part5</code> (default 2/3).</li>
<li>For MM defined days only: The length of the day needs to be at least
the number of hours as specified by <code>minimum_MM_length.part5</code>
(default 23). Note that if your experiment started and ended in the
middle of the day then this default setting will exclude those
incomplete first and last days. If you think including these days is
still meaningful for your work then adjust the argument
<code>minimum_MM_length.part5</code>.</li>
</ul>
<p><strong>Important notes:</strong></p>
<ul>
<li>No criteria is set for the amount of valid data during the SPT
window, because all we are interested in part 5 is knowing the borders
of the night and we trust that this was sufficiently estimated by part
4. If you disagree then please notice that all the days are included in
the full report available in <code>results/QC</code> folder.</li>
<li>This means that argument <code>includenightcrit</code> as used for
part 4 is not used in part 5.</li>
</ul>
<p>The <code>data_cleaning_file</code> argument discussed in <a href="#Data_cleaning_file">Data_cleaning_file</a> also allows you to
tell GGIR which person(s) and day(s) should be omitted in part 5. The
the day numbers to be excluded should be listed in a column
<code>day_part5</code> as header.</p>
</div>
<div class="section level4">
<h4 id="fragmentation-metrics">Fragmentation metrics<a class="anchor" aria-label="anchor" href="#fragmentation-metrics"></a>
</h4>
<p>When setting input argument as <code>frag.metrics="all"</code> GGIR
part 5 will perform behavioural fragmentation analysis for daytime and
(separately) for spt. Do this in combination with argument
<code>part5_agg2_60seconds=TRUE</code> as that will aggregate the time
series to 1 minute resolution as is common in behavioural fragmentation
literature.</p>
<p>In GGIR, a fragment for daytime is a defined as a sequence of epochs
that belong to one of the four categories:</p>
<ol style="list-style-type: decimal">
<li>Inactivity</li>
<li>Light Physical Activity (LIPA)</li>
<li>Moderate or Vigorous Physical Acitivty (MVPA)</li>
<li>Physical activity (can be either LIPA or MVPA)</li>
</ol>
<p>Each of these categories represents the combination of bouted and
unbouted time in the respective categories. Inactivity and physical
activity add up to a full day (outside SPT), as well as inactivity, LIPA
and MVPA. The fragmentation metrics are applied in function
<code>g.fragmentation</code>.</p>
<p>A fragment of SPT is defined as a sequence of epochs that belong to
one of the four categories: 1. Estimated sleep 2. Estimated wakefulness
3. Inactivity 4. Physical activity (can be either LIPA or MVPA)</p>
<p>Note that from the metrics below only fragmentation metrics TP and
NFrag are calculated for the SPT fragments.</p>
<p><strong>Literature about these metrics:</strong></p>
<ul>
<li>Coefficient of Variance (<code>CoV</code>) is calculated according
to <a href="https://doi.org/10.1016/j.apmr.2014.08.023" class="external-link">Blikman et al.
2014</a>.</li>
<li>Transition probability (<code>TP</code>) from Inactivity (IN) to
Physical activity (IN2PA) and from Physical activity to inactivity
(PA2IN) are calculated as 1 divided by the mean fragment duration. The
transition probability from Inactivity to LIPA and MVPA are calculated
as: (Total duration in IN followed by LIPA or MVPA, respectively,
divided by total duration in IN) divided by the average duration in
IN.</li>
<li>Gini index is calculated with function <code>Gini</code> from the
<code>ineq</code> R package, and with it’s argument <code>corr</code>
set to TRUE.</li>
<li>Power law exponent metrics: Alpha, x0.5, and W0.5 are calculated
according to <a href="https://www.sciencedirect.com/science/article/abs/pii/S096663620900602X?via%3Dihub" class="external-link">Chastin
et al. 2010</a>.</li>
<li>Number of fragment per minutes (<code>NFragPM</code>) is calculated
identical to metric <code>fragmentation</code> in <a href="https://academic.oup.com/ageing/article/41/1/111/46538" class="external-link">Chastin et
al. 2012</a>, but it is renamed here to be a more specific reflection of
the calculation. The term <code>fragmentation</code> appears too generic
given that all fragmentation metrics inform us about fragmentation.
Please not that this is effectively the same metric as the transition
probability, because total number divided by total sum in duration
equals 1 divided by average duration. This is just different terminology
for the same construct.</li>
</ul>
<p><strong>Conditions for calculation and value when condition is not
met:</strong></p>
<ul>
<li>Metrics <code>Gini</code> and <code>CoV</code> are only calculated
if there are at least 10 fragments (e.g. 5 inactive and 5 active). If
this condition is not met the metric value will be set to missing.</li>
<li>Metrics related to power law exponent alpha are also only calculated
when there are at least 10 fragments, but with the additional condition
that the standard deviation in fragment duration is not zero. If these
conditions are not met the metric value will be set to missing.</li>
<li>Other metrics related to binary fragmentation
(<code>mean_dur_PA</code> and <code>mean_dur_IN</code>), are calculated
when there are at least 2 fragments (1 inactive, 1 active). If this
condition is not met the value will is set to zero.</li>
<li>Metrics related to <code>TP</code> are calculated if: There is at
least 1 inactivity fragment AND (1 LIPA OR 1 MVPA fragment). If this
condition is not met the <code>TP</code> metric value is set to
zero.</li>
</ul>
<p>To keep an overview of which recording days met the criteria for
non-zero standard deviation and at least ten fragments, GGIR part5
stores variable <code>Nvaliddays_AL10F</code> at person level (=Number
of valid days with at least 10 fragments), and <code>SD_dur</code>
(=standard deviation of fragment durations) at day level as well as
aggregated per person.</p>
<p><strong>Difference between fragments and blocks:</strong></p>
<p>Elsewhere in the part5 we use the term <code>block</code>. A
<code>block</code> is a sequence of epochs that belong to the same
behavioural class. This may sound similar to the definition of a
fragment, but for blocks we distinguish every behavioural class, which
includes the subcategories such as bouted and unbouted behaviour. This
means that variables <code>Nblock_day_total_IN</code> and
<code>Nblock_day_total_LIG</code> are identical to
<code>Nfrag_IN_day</code> and <code>Nfrag_LIPA_day</code>, respectively.
In contrast, for fragments we may group LIPA and MVPA together when
refering to the fragmentation of PA.</p>
<p><strong>Differences with R package ActFrag:</strong></p>
<p>The fragmentation functionality is loosely inspired on the great work
done by Dr. Junrui Di and colleages in R package ActFrag, as described
in <a href="https://www.biorxiv.org/content/10.1101/182337v1" class="external-link">Junrui Di
et al. 2017</a>.</p>
<p>However, we made a couple of a different decisions that may affect
comparability:</p>
<ul>
<li>GGIR derives fragmentation metrics per day. This allows us to avoid
the issue of gaps between days that need to be dealt with. Further, it
allows us to test for behavioural differences between days of the week.
It is well known that human behaviour can be driven by weekly rhythms,
e.g. work days versus weekend. Estimating fragmentation per day of the
week allows us to study and account for such possible variation. As with
all other GGIR variables we also report recording level aggregates of
the daily estimates.</li>
<li>Transition probability is according to <a href="https://doi.org/10.5665/sleep.1400" class="external-link">Lim et al. 2011</a>
</li>
<li>Power law alpha exponent metrics were calculated according to <a href="https://www.sciencedirect.com/science/article/abs/pii/S096663620900602X?via%3Dihub" class="external-link">Chastin
et al. 2010</a> using the theoretical minimum fragment duration instead
of the observed minimum fragment duration.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="why-use-data-metric-enmo-as-default">Why use data metric ENMO as default?<a class="anchor" aria-label="anchor" href="#why-use-data-metric-enmo-as-default"></a>
</h3>
<p>GGIR offers a range of acceleration metrics to choose from, but only
one metric can be the default. Acceleration metric ENMO (Euclidean Norm
Minus One with negative values rounded to zero) has been the default
metric in GGIR. In 2013 we wrote a paper in which we investigated
different ways of summarising the raw acceleration data. In short,
different metrics exist and there is very little literature to support
the superiority of any metric at the time. As long as different studies
use different metrics their findings will not be comparable. Therefore,
the choice for metric ENMO is partially pragmatic. GGIR uses ENMO as
default because:</p>
<ol style="list-style-type: decimal">
<li>ENMO has demonstrated value in describing variance in energy
expenditure, correlated with questionnaire data, able to describe
patterns in physical activity</li>
<li>ENMO is easy to describe mathematically and by that improves
reproducibility across studies and software tools</li>
<li>ENMO attempts to quantify the actual biomechanical acceleration in
universal units.</li>
<li>The 2013 paper showed that when ENMO is used in combination with
auto-calibration it has similar validity to filter-based metrics like
HFEN and BFEN, which are conceptually similar to metrics proposed later
such as MIMSunit, MAD, AI0.</li>
<li>Studies who have criticised ENMO consistently failed to apply
auto-calibration, or attempted to apply auto-calibration in a lab
setting, ignoring the fact that the auto-calibration is not designed for
short lasting lab settings. It needs free-living data to work properly.
Further, studies are often not clear about how the problematic zero
imputation during the idle sleep mode in ActiGraph devices is dealt
with. See for a more detailed discussion on this the paragraph: <a href="#Published%20cut-points%20and%20how%20to%20use%20them">Published
cut-points and how to use them</a>.</li>
</ol>
<p>See also <a href="https://medium.com/@vincentvanhees/ten-misunderstandings-surrounding-information-extraction-from-wearable-accelerometer-data-a4f767a865b6" class="external-link">this</a>
blog post on this topic.</p>
</div>
<div class="section level3">
<h3 id="what-does-ggir-stand-for">What does GGIR stand for?<a class="anchor" aria-label="anchor" href="#what-does-ggir-stand-for"></a>
</h3>
<p>I wanted a short name and not to spend too much time finding it. At
the time I was primarily working with GENEActiv and GENEA data In R, and
that’s how the name GGIR was born: Short, easy to remember, and as
acronym sufficiently vague to not be tight up with a specific
functionality. However, later the functionality expanded to other sensor
brands, so the abbreviation has lost its functional meaning.</p>
</div>
<div class="section level3">
<h3 id="circadian-rhythm-analyses">Circadian Rhythm analyses<a class="anchor" aria-label="anchor" href="#circadian-rhythm-analyses"></a>
</h3>
<div class="section level4">
<h4 id="mxlx">MXLX<a class="anchor" aria-label="anchor" href="#mxlx"></a>
</h4>
<p>Detection of the continuous least (LX) and most (MX) active X hours
in a day, where X is defined by argument <code>winhr</code>. For both
GGIR calculates the average acceleration, the start time, and if
argument <code>iglevels</code> is specified also the intensity gradient.
If argument <code>winhr</code> is a vector then descriptive values for
LX and MX are derived per value in <code>winhr</code>. Within GGIR part
2 MXLX is calculated per calendar day and, if argument
<code>qwindow</code> is specified, per segment of the day. Within GGIR
part 5 MXLX is calculated per window, and if used in combination with
the GENEActiv accelerometer brand LUX estimates per LX and MX are
included.</p>
<p>The MX metric describe here should not be confused by the MX metrics
as proposed by <a href="https://doi.org/10.1186/s40798-019-0225-9" class="external-link">Rowlands et al.</a>
which looks at accumulated most active time which may not always be
continuous in time. The MX metrics by Rowlands et all are discussed
further down.</p>
</div>
<div class="section level4">
<h4 id="cosinor-analysis-and-extended-cosinor-analysis">Cosinor analysis and Extended Cosinor analysis<a class="anchor" aria-label="anchor" href="#cosinor-analysis-and-extended-cosinor-analysis"></a>
</h4>
<p>The (Extended) Cosinor analysis quantifies the circadian 24 hour
cycle. To do this GGIR uses R package <a href="https://CRAN.R-project.org/package=ActCR" class="external-link">ActCR</a> as a
dependency. Specify argument <code>cosinor = TRUE</code> to perform
these analysis.</p>
<p>The implementation within GGIR part 2 is as follows:</p>
<ul>
<li>Acceleration values are averaged per minute, and then log
transformation as
<code>log(acceleration converted to _mg_ + 1)</code>.</li>
<li>Invalid data points such as caused by non-wear are set to missing
(NA) in order to prevent the imputation approach used elsewhere in GGIR
to influence the Cosinor analysis. We do this because imputation
technique generally come with some assumptions about circadian
rhythm.</li>
<li>GGIR looks for the first valid data point in the recording and then
selects the maximum integer number of recording days following this data
point and feeds these to the ActCosinor and ActExtendCosinor functions
of ActCR. The time offset between the start and the following midnight
is then used to reverse offset the ActCR results, to ensure that
acrophase and acrotime can be interpreted relative to midnight.</li>
<li>In relation to Day Saving Time: Duplicated time stamps when clock
moves backward are ignored and missing time stamps when clock moves
forward are inserted as missing values.</li>
<li>Time series corresponding to the fitted models are stored inside the
part 2 milestone data to facilitate visual inspection. For the moment
they are not used in any GGIR visualisation, but you may want to look
them up and try to plot them yourself.</li>
</ul>
</div>
<div class="section level4">
<h4 id="intradaily-variability-iv-and-interdaily-stability-is">Intradaily Variability (IV) and Interdaily Stability (IS)<a class="anchor" aria-label="anchor" href="#intradaily-variability-iv-and-interdaily-stability-is"></a>
</h4>
<div class="section level5">
<h5 id="iv-and-is---default">IV and IS - Default<a class="anchor" aria-label="anchor" href="#iv-and-is---default"></a>
</h5>
<p>The original implementation (argument IVIS.activity.metric = 1) uses
the continuous numeric acceleration values. However, as we later
realised this is not compatible with the original approach by van
Someren and colleagues, which uses a binary distinction between active
and inactive. Therefore, a second option was added (argument
IVIS.activity.metric = 2), which needs to be used in combination with
accelerometer metric ENMO, and collapses the acceleration values into a
binary score of rest versus active. This is the current default.</p>
</div>
<div class="section level5">
<h5 id="iv-and-is---cosinor-analysis-compatible">IV and IS - Cosinor analysis compatible<a class="anchor" aria-label="anchor" href="#iv-and-is---cosinor-analysis-compatible"></a>
</h5>
<p>Disclaimer: The following has been implemented 2022, but is currently
undergoing critical evaluation. As a result, we may update this
algorithm during the course of 2023.</p>
<p>IS is sometimes used as a measure of behavioural robustness when
conducting Cosinor analysis. However, to work with the combination of
the two outcomes it seems important that IS is calculated from the same
time series. Therefore, when <code>cosinor = TRUE</code> IV and IS are
calculated twice: Once as part of the default IV and IS analysis as
discussed above, and once as part of the Cosinor analysis using the same
log transformed time series. More specifically, the IV and IS algorithm
is applied with <code>IVIS.activity.metric = 2</code> and
<code>IVIS_acc_threshold = log(20 + 1)</code> to make the binary
distinction between active and inactive, and
<code>IVIS_per_daypair = TRUE</code>. The setting
<code>IVIS_per_daypair</code> was specifically designed for this context
to handle the potentially missing values in the time series as used for
Cosinor analysis. Applying the default IVIS algorithm would not be able
to handle the missing values and would result in a loss of information
if all non-matching epochs across the entire recording were excluded.
Instead, IV and IS are calculated as follows:</p>
<ol style="list-style-type: decimal">
<li>Per day pair based on matching valid epochs only IV and IS and
calculated. Here, a log is kept of the number of valid epoch per day
pair.</li>
<li>Omit day pairs where the fraction of valid epoch pairs is below 0.66
(0.66 is hard-coded at the moment).</li>
<li>Calculate average IS across days weighted by fraction of valid
epochs per day pairs.</li>
</ol>
<p>The new Cosinor-compatible IV and IS estimates are stored as output
variables <code>cosinorIV</code> and <code>cosinorIS</code>.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="actigraphs-idle-sleep-mode">ActiGraph’s idle sleep mode<a class="anchor" aria-label="anchor" href="#actigraphs-idle-sleep-mode"></a>
</h3>
<p>The idle sleep mode is <a href="https://actigraphcorp.my.site.com/support/s/article/Idle-Sleep-Mode-Explained" class="external-link">explained</a>
on the manufacturer’s website. In short, idle sleep mode is a setting
that can be turned on or off by the user. When it is turned on the
device will fall asleep during periods of no movement, resulting in time
gaps in the data. This functionality was probably introduced to safe
battery life and minimize data size. However, it also means that we end
up with time gaps that need to be accounted for.</p>
<div class="section level4">
<h4 id="time-gap-imputation">Time gap imputation<a class="anchor" aria-label="anchor" href="#time-gap-imputation"></a>
</h4>
<p>Studies done with ActiGraph devices when configured with ‘idle sleep
mode’ and with data exported to .csv by the commerical ActiLife software
will have imputed values in all three axes during periods of no
movement. Note that the imputation by the ActiLife software has changed
at some point in time. Initially the imputation was zeros but with more
recent versions of ActiLife the imputation uses the last recorded value
for each axes.</p>
<p>When processing gt3x files that have time gaps GGIR takes care of the
time gap imputation: Time gaps shorter than 90 minutes are imputed at
raw data level with the last known recorded value before the timeg gap,
while longer time gaps are imputed at epoch level. We do this to make
the data processing more memory efficient and faster.</p>
<p>Time gaps in the data are considered non-wear time in GGIR, this
implies that we trust the ActiGraph sleep mode to only be activated when
the device is not worn, although there is always a risk of
sleep/sedentary misclassification.</p>
</div>
<div class="section level4">
<h4 id="the-importance-of-reporting-idle-sleep-mode-usage">The importance of reporting idle.sleep.mode usage<a class="anchor" aria-label="anchor" href="#the-importance-of-reporting-idle-sleep-mode-usage"></a>
</h4>
<p>Studies often forget to clarify whether idle sleep mode was used and
if so, how it was accounted for in the data processing. Especially, the
insertion of zero strings is problematic as raw data accelerometers
should always measure the gravitational component when not moving. This
directly impacts metrics that rely on the presence of a gravitational
component such as ENMO, EN, ENMOa, SVMgs, and angles. Further, also
other metrics may be affected as the sudden disappearance of
gravitational acceleration will cause a spike at the start and end of
the idle sleep mode period. More generally speaking, we advise ActiGraph
users to:</p>
<ul>
<li>Disable the ‘idle sleep mode’ as it harms the transparency and
reproducibility since no mechanism exists to replicate it in other
accelerometer brands, and it is likely to challenge accurate assessment
of sleep and sedentary behaviour.</li>
<li>That data collected with ‘idle sleep mode’ turned on is not be
referred to as raw data accelerometry, because the data collection
process has involved proprietary pre-processing steps which violate the
core principle of raw data collection.</li>
<li>Report whether ‘idle sleep mode’ was used. If the choice was not
consistent within a study then try to account for idle mode sleep usage
in the statistical analyses.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="mx-metrics-minimum-intensity-of-most-active-x-minutes">MX metrics (minimum intensity of most active X minutes)<a class="anchor" aria-label="anchor" href="#mx-metrics-minimum-intensity-of-most-active-x-minutes"></a>
</h3>
<p>The <code>qlevels</code> argument (the percentile in the distribution
of short epoch metric value) can be used to describe the accelerations
that participants spend “X” accumulated minutes a day above, described
as the MX metrics (e.g., <a href="https://doi.org/10.1186/s40798-019-0225-9" class="external-link">Rowlands et
al</a>).</p>
<p>The MX metrics should not be confused with the most active continuous
X hours, e.g. M10, as used in circadian rhythm research that also can be
derived with GGIR, see argument <code>winhr</code>.</p>
<p><strong>Usage</strong> To use the MX metrics as proposed by <a href="https://doi.org/10.1186/s40798-019-0225-9" class="external-link">Rowlands et al</a>,
specify the durations of the 24h day that you wish to filter out the
accelerations for. For example, to generate the minimum acceleration
value for the most active 30 minutes you can call qlevels = (1410/1440),
which will filter out the lowest 1410 minutes of the day. This can also
be used as a nested term to generate multiple metrics, for example to
call M60, M30 and M10, you can use argument:</p>
<p><code>qlevels = c(c(1380/1440),c(1410/1440),c(1430/1440)).</code></p>
<p>Note: if your qwindow is less than 24 h, e.g. the school day (e.g. <a href="https://doi.org/10.1111/sms.13565" class="external-link">Fairclough et al 2020</a>) the
denominator should be changed from 1440 (24h) accordingly, e.g. if an 8
h window the denominator would be 480 rather than 1440.</p>
<p><strong>Output</strong> The output in part2 summary files will refer
to this as a percentile of the day. Thus, for a 24 h day, M30 will
appear as “p 97.91666_ENMO_mg_0.24hr”. To graph the radar plots of these
MX metrics as first described by <a href="https://doi.org/10.1186/s40798-019-0225-9" class="external-link">Rowlands et al</a>, you
can access <a href="https://github.com/Maylor8/RadarPlotGenerator" class="external-link">this</a> github
repository which provides the R code and detailed instructions on how to
make the radar plots using your own data.</p>
</div>
</div>
<div class="section level2">
<h2 id="other-resources">Other Resources<a class="anchor" aria-label="anchor" href="#other-resources"></a>
</h2>
<ul>
<li>The <a href="https://CRAN.R-project.org/package=GGIR" class="external-link">GGIR package
manual</a> provides documentation on individual functions.</li>
<li>For general questions about how to use GGIR join our <a href="https://groups.google.com/forum/#!forum/rpackageggir" class="external-link">google
group/mailing list</a>.</li>
<li>For bug reports please post them <a href="https://github.com/wadpac/GGIR/issues" class="external-link">here</a>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="CitingGGIR">Citing GGIR<a class="anchor" aria-label="anchor" href="#CitingGGIR"></a>
</h2>
<p>A correct citation of research software is important to make your
research reproducible and to acknowledge the effort that goes into the
development of open-source software.</p>
<p>To do so, please report the GGIR version you used in the text.
Additionally, please also cite:</p>
<ol style="list-style-type: decimal">
<li>Migueles JH, Rowlands AV, et al. GGIR: A Research Community–Driven
Open Source R Package for Generating Physical Activity and Sleep
Outcomes From Multi-Day Raw Accelerometer Data. Journal for the
Measurement of Physical Behaviour. 2(3) 2019. doi:
10.1123/jmpb.2018-0063.</li>
</ol>
<p>If your work depends on the quantification of <strong>physical
activity</strong> then also cite:</p>
<ol start="2" style="list-style-type: decimal">
<li>van Hees VT, Gorzelniak L, et al. Separating Movement and Gravity
Components in an Acceleration Signal and Implications for the Assessment
of Human Daily Physical Activity. PLoS ONE 8(4) 2013. <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0061691" class="external-link">link</a>
</li>
<li>Sabia S, van Hees VT, Shipley MJ, Trenell MI, Hagger-Johnson G,
Elbaz A, Kivimaki M, Singh-Manoux A. Association between questionnaire-
and accelerometer-assessed physical activity: the role of
sociodemographic factors. Am J Epidemiol. 2014 Mar 15;179(6):781-90.
doi: 10.1093/aje/kwt330. Epub 2014 Feb 4. PMID: 24500862 <a href="https://pubmed.ncbi.nlm.nih.gov/24500862/" class="external-link">link</a>
</li>
</ol>
<p>If you used the <strong>auto-calibration functionality</strong> then
also cite:</p>
<ol start="4" style="list-style-type: decimal">
<li>van Hees VT, Fang Z, et al. Auto-calibration of accelerometer data
for free-living physical activity assessment using local gravity and
temperature: an evaluation on four continents. J Appl Physiol 2014. <a href="https://doi.org/10.1152/japplphysiol.00421.2014" class="external-link">link</a>
</li>
</ol>
<p>If you used the <strong>sleep detection</strong> then also cite:</p>
<ol start="5" style="list-style-type: decimal">
<li>van Hees VT, Sabia S, et al. A novel, open access method to assess
sleep duration using a wrist-worn accelerometer, PLoS ONE, 2015 <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0142533" class="external-link">link</a>
</li>
</ol>
<p>If you used the <strong>sleep detection without relying on sleep
diary</strong> then also cite:</p>
<ol start="6" style="list-style-type: decimal">
<li>van Hees VT, Sabia S, et al. Estimating sleep parameters using an
accelerometer without sleep diary. Scientific Reports 2018. doi:
10.1038/s41598-018-31266-z. <a href="https://www.nature.com/articles/s41598-018-31266-z" class="external-link">link</a>
</li>
</ol>
<p>If you used the <strong>sleep regularity index</strong> then also
cite:</p>
<ol start="7" style="list-style-type: decimal">
<li>Andrew J. K. Phillips, William M. Clerx, et al. Irregular sleep/wake
patterns are associated with poorer academic performance and delayed
circadian and sleep/wake timing. Scientific Reports. 2017 June 12 <a href="https://www.nature.com/articles/s41598-017-03171-4" class="external-link">link</a>.</li>
</ol>
<div class="section level3">
<h3 id="copyright-for-ggir-logo">Copyright for GGIR logo<a class="anchor" aria-label="anchor" href="#copyright-for-ggir-logo"></a>
</h3>
<p>The copyright of the GGIR logo lies with Accelting (Almere, The
Netherlands), please contact <a href="mailto:v.vanhees@acceleting.com" class="email">v.vanhees@acceleting.com</a> to ask for permission to use
this logo.</p>
<p><img src="../../../R%20pkgs/GGIR/articles/GGIR-MASTERLOGO-RGB.png" width="60%" style="border: 0; padding:20px"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.accelting.com/" class="external-link">Vincent T van Hees</a>, <a href="https://www.jhmigueles.com/" class="external-link">Jairo H Migueles</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
